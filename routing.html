

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="ja" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="ja" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Routing &mdash; Symfony Framework Documentation  ドキュメント</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="next" title="Controller" href="controller.html" />
    <link rel="prev" title="Create your First Page in Symfony" href="page_creation.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Symfony Framework Documentation
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="quick_tour/index.html">The Quick Tour</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="getting_started/index.html">Getting Started</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="best_practices.html">The Symfony Framework Best Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="bundles.html">The Bundle System</a></li>
<li class="toctree-l1"><a class="reference internal" href="cache.html">Cache</a></li>
<li class="toctree-l1"><a class="reference internal" href="console.html">Console Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="doctrine.html">Databases and the Doctrine ORM</a></li>
<li class="toctree-l1"><a class="reference internal" href="deployment.html">How to Deploy a Symfony Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="email.html">Swift Mailer</a></li>
<li class="toctree-l1"><a class="reference internal" href="event_dispatcher.html">Events and Event Listeners</a></li>
<li class="toctree-l1"><a class="reference internal" href="forms.html">Forms</a></li>
<li class="toctree-l1"><a class="reference internal" href="frontend.html">Managing CSS and JavaScript</a></li>
<li class="toctree-l1"><a class="reference internal" href="http_cache.html">HTTP Cache</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="mailer.html">Sending Emails with Mailer</a></li>
<li class="toctree-l1"><a class="reference internal" href="mercure.html">Pushing Data to Clients Using the Mercure Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="messenger.html">Messenger: Sync &amp; Queued Message Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="migration.html">Migrating an Existing Application to Symfony</a></li>
<li class="toctree-l1"><a class="reference internal" href="notifier.html">Creating and Sending Notifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="performance.html">Performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="profiler.html">Profiler</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Routing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#creating-routes">Creating Routes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#creating-routes-as-annotations">Creating Routes as Annotations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#creating-routes-in-yaml-xml-or-php-files">Creating Routes in YAML, XML or PHP Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#matching-http-methods">Matching HTTP Methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="#matching-expressions">Matching Expressions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#debugging-routes">Debugging Routes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#route-parameters">Route Parameters</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#parameters-validation">Parameters Validation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#optional-parameters">Optional Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#priority-parameter">Priority Parameter</a></li>
<li class="toctree-l3"><a class="reference internal" href="#parameter-conversion">Parameter Conversion</a></li>
<li class="toctree-l3"><a class="reference internal" href="#special-parameters">Special Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#extra-parameters">Extra Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#slash-characters-in-route-parameters">Slash Characters in Route Parameters</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#route-groups-and-prefixes">Route Groups and Prefixes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#getting-the-route-name-and-parameters">Getting the Route Name and Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="#special-routes">Special Routes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#rendering-a-template-directly-from-a-route">Rendering a Template Directly from a Route</a></li>
<li class="toctree-l3"><a class="reference internal" href="#redirecting-to-urls-and-routes-directly-from-a-route">Redirecting to URLs and Routes Directly from a Route</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#redirecting-urls-with-trailing-slashes">Redirecting URLs with Trailing Slashes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#sub-domain-routing">Sub-Domain Routing</a></li>
<li class="toctree-l2"><a class="reference internal" href="#localized-routes-i18n">Localized Routes (i18n)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#stateless-routes">Stateless Routes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#generating-urls">Generating URLs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#generating-urls-in-controllers">Generating URLs in Controllers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#generating-urls-in-services">Generating URLs in Services</a></li>
<li class="toctree-l3"><a class="reference internal" href="#generating-urls-in-templates">Generating URLs in Templates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#generating-urls-in-javascript">Generating URLs in JavaScript</a></li>
<li class="toctree-l3"><a class="reference internal" href="#generating-urls-in-commands">Generating URLs in Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="#checking-if-a-route-exists">Checking if a Route Exists</a></li>
<li class="toctree-l3"><a class="reference internal" href="#forcing-https-on-generated-urls">Forcing HTTPS on Generated URLs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#troubleshooting">Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="#learn-more-about-routing">Learn more about Routing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="controller.html">Controller</a></li>
<li class="toctree-l3"><a class="reference internal" href="routing/custom_route_loader.html">How to Create a custom Route Loader</a></li>
<li class="toctree-l3"><a class="reference internal" href="routing/routing_from_database.html">Looking up Routes from a Database: Symfony CMF DynamicRouter</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="session.html">Sessions</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="setup.html">Installing &amp; Setting up the Symfony Framework</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="setup.html#technical-requirements">Technical Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="setup.html#creating-symfony-applications">Creating Symfony Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="setup.html#running-symfony-applications">Running Symfony Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="setup.html#setting-up-an-existing-symfony-project">Setting up an Existing Symfony Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="setup.html#installing-packages">Installing Packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="setup.html#checking-security-vulnerabilities">Checking Security Vulnerabilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="setup.html#symfony-lts-versions">Symfony LTS Versions</a></li>
<li class="toctree-l2"><a class="reference internal" href="setup.html#the-symfony-demo-application">The Symfony Demo application</a></li>
<li class="toctree-l2"><a class="reference internal" href="setup.html#start-coding">Start Coding!</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="setup.html#learn-more">Learn More</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="page_creation.html">Create your First Page in Symfony</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="page_creation.html#creating-a-page-route-and-controller">Creating a Page: Route and Controller</a></li>
<li class="toctree-l4"><a class="reference internal" href="page_creation.html#annotation-routes">Annotation Routes</a></li>
<li class="toctree-l4"><a class="reference internal" href="page_creation.html#auto-installing-recipes-with-symfony-flex">Auto-Installing Recipes with Symfony Flex</a></li>
<li class="toctree-l4"><a class="reference internal" href="page_creation.html#the-bin-console-command">The bin/console Command</a></li>
<li class="toctree-l4"><a class="reference internal" href="page_creation.html#the-web-debug-toolbar-debugging-dream">The Web Debug Toolbar: Debugging Dream</a></li>
<li class="toctree-l4"><a class="reference internal" href="page_creation.html#rendering-a-template">Rendering a Template</a></li>
<li class="toctree-l4"><a class="reference internal" href="page_creation.html#checking-out-the-project-structure">Checking out the Project Structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="page_creation.html#what-s-next">What&#8217;s Next?</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="page_creation.html#go-deeper-with-http-framework-fundamentals">Go Deeper with HTTP &amp; Framework Fundamentals</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="setup/homestead.html">Using Symfony with Homestead/Vagrant</a></li>
<li class="toctree-l3"><a class="reference internal" href="setup/web_server_configuration.html">Configuring a Web Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="setup/bundles.html">Upgrading a Third-Party Bundle for a Major Symfony Version</a></li>
<li class="toctree-l3"><a class="reference internal" href="setup/file_permissions.html">Setting up or Fixing File Permissions</a></li>
<li class="toctree-l3"><a class="reference internal" href="setup/flex.html">Upgrading Existing Applications to Symfony Flex</a></li>
<li class="toctree-l3"><a class="reference internal" href="setup/symfony_server.html">Symfony Local Web Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="setup/unstable_versions.html">How to Install or Upgrade to the Latest, Unreleased Symfony Version</a></li>
<li class="toctree-l3"><a class="reference internal" href="setup/upgrade_major.html">Upgrading a Major Version (e.g. 4.4.0 to 5.0.0)</a></li>
<li class="toctree-l3"><a class="reference internal" href="setup/upgrade_minor.html">Upgrading a Minor Version (e.g. 4.0.0 to 4.1.0)</a></li>
<li class="toctree-l3"><a class="reference internal" href="setup/upgrade_patch.html">Upgrading a Patch Version (e.g. 5.0.0 to 5.0.1)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="serializer.html">How to Use the Serializer</a></li>
<li class="toctree-l1"><a class="reference internal" href="service_container.html">Service Container</a></li>
<li class="toctree-l1"><a class="reference internal" href="testing.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="translation.html">Translations</a></li>
<li class="toctree-l1"><a class="reference internal" href="validation.html">Validation</a></li>
<li class="toctree-l1"><a class="reference internal" href="web_link.html">Asset Preloading and Resource Hints with HTTP/2 and WebLink</a></li>
<li class="toctree-l1"><a class="reference internal" href="workflow.html">Workflow</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="components/index.html">The Components</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="reference/index.html">Reference Documents</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contributing/index.html">Contributing</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="create_framework/index.html">Create your own PHP Framework</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Symfony Framework Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="getting_started/index.html">Getting Started</a> &raquo;</li>
        
          <li><a href="setup.html">Installing &amp; Setting up the Symfony Framework</a> &raquo;</li>
        
          <li><a href="page_creation.html">Create your First Page in Symfony</a> &raquo;</li>
        
      <li>Routing</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/routing.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="routing">
<span id="index-0"></span><h1>Routing<a class="headerlink" href="#routing" title="このヘッドラインへのパーマリンク">¶</a></h1>
<p>When your application receives a request, it executes a
<a class="reference internal" href="controller.html"><em>controller action</em></a> to generate the response. The routing
configuration defines which action to run for each incoming URL. It also
provides other useful features, like generating SEO-friendly URLs (e.g.
<code class="docutils literal"><span class="pre">/read/intro-to-symfony</span></code> instead of <code class="docutils literal"><span class="pre">index.php?article_id=57</span></code>).</p>
<div class="section" id="creating-routes">
<span id="routing-creating-routes"></span><h2>Creating Routes<a class="headerlink" href="#creating-routes" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>Routes can be configured in YAML, XML, PHP or using annotations. All formats
provide the same features and performance, so choose your favorite.
<a class="reference internal" href="best_practices.html#best-practice-controller-annotations"><span>Symfony recommends annotations</span></a>
because it&#8217;s convenient to put the route and controller in the same place.</p>
<div class="section" id="creating-routes-as-annotations">
<h3>Creating Routes as Annotations<a class="headerlink" href="#creating-routes-as-annotations" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>Run this command once in your application to add support for annotations:</p>
<div class="highlight-terminal"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">$</span> composer require annotations
</pre></div>
</td></tr></table></div>
<p>In addition to installing the needed dependencies, this command creates the
following configuration file:</p>
<div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># config/routes/annotations.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">controllers</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">resource</span><span class="p p-Indicator">:</span> <span class="s">&#39;../../src/Controller/&#39;</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">annotation</span>

<span class="l l-Scalar l-Scalar-Plain">kernel</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">resource</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">../../src/Kernel.php</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">annotation</span>
</pre></div>
</td></tr></table></div>
<p>This configuration tells Symfony to look for routes defined as annotations in
any PHP class stored in the <code class="docutils literal"><span class="pre">src/Controller/</span></code> directory.</p>
<p>Suppose you want to define a route for the <code class="docutils literal"><span class="pre">/blog</span></code> URL in your application. To
do so, create a <a class="reference internal" href="controller.html"><em>controller class</em></a> like the following:</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="c1">// src/Controller/BlogController.php</span>
<span class="k">namespace</span> <span class="nx">App\Controller</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Bundle\FrameworkBundle\Controller\AbstractController</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Annotation\Route</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">BlogController</span> <span class="k">extends</span> <span class="nx">AbstractController</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @Route(&quot;/blog&quot;, name=&quot;blog_list&quot;)</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">list</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This configuration defines a route called <code class="docutils literal"><span class="pre">blog_list</span></code> that matches when the
user requests the <code class="docutils literal"><span class="pre">/blog</span></code> URL. When the match occurs, the application runs
the <code class="docutils literal"><span class="pre">list()</span></code> method of the <code class="docutils literal"><span class="pre">BlogController</span></code> class.</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">The query string of a URL is not considered when matching routes. In this
example, URLs like <code class="docutils literal"><span class="pre">/blog?foo=bar</span></code> and <code class="docutils literal"><span class="pre">/blog?foo=bar&amp;bar=foo</span></code> will
also match the <code class="docutils literal"><span class="pre">blog_list</span></code> route.</p>
</div>
<p>The route name (<code class="docutils literal"><span class="pre">blog_list</span></code>) is not important for now, but it will be
essential later when <a class="reference internal" href="#routing-generating-urls"><span>generating URLs</span></a>. You only
have to keep in mind that each route name must be unique in the application.</p>
</div>
<div class="section" id="creating-routes-in-yaml-xml-or-php-files">
<h3>Creating Routes in YAML, XML or PHP Files<a class="headerlink" href="#creating-routes-in-yaml-xml-or-php-files" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>Instead of defining routes in the controller classes, you can define them in a
separate YAML, XML or PHP file. The main advantage is that they don&#8217;t require
any extra dependency. The main drawback is that you have to work with multiple
files when checking the routing of some controller action.</p>
<p>The following example shows how to define in YAML/XML/PHP a route called
<code class="docutils literal"><span class="pre">blog_list</span></code> that associates the <code class="docutils literal"><span class="pre">/blog</span></code> URL with the <code class="docutils literal"><span class="pre">list()</span></code> action of
the <code class="docutils literal"><span class="pre">BlogController</span></code>:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># config/routes.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">blog_list</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">path</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">/blog</span>
    <span class="c1"># the controller value has the format &#39;controller_class::method_name&#39;</span>
    <span class="l l-Scalar l-Scalar-Plain">controller</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">App\Controller\BlogController::list</span>

    <span class="c1"># if the action is implemented as the __invoke() method of the</span>
    <span class="c1"># controller class, you can skip the &#39;::method_name&#39; part:</span>
    <span class="c1"># controller: App\Controller\BlogController</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>XML</em><div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">&lt;!-- config/routes.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;routes</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/routing&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/routing</span>
<span class="s">        https://symfony.com/schema/routing/routing-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="c">&lt;!-- the controller value has the format &#39;controller_class::method_name&#39; --&gt;</span>
    <span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;blog_list&quot;</span> <span class="na">path=</span><span class="s">&quot;/blog&quot;</span>
           <span class="na">controller=</span><span class="s">&quot;App\Controller\BlogController::list&quot;</span><span class="nt">/&gt;</span>

    <span class="c">&lt;!-- if the action is implemented as the __invoke() method of the</span>
<span class="c">         controller class, you can skip the &#39;::method_name&#39; part:</span>
<span class="c">         controller=&quot;App\Controller\BlogController&quot;/&gt; --&gt;</span>
<span class="nt">&lt;/routes&gt;</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>PHP</em><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// config/routes.php</span>
<span class="k">use</span> <span class="nx">App\Controller\BlogController</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Loader\Configurator\RoutingConfigurator</span><span class="p">;</span>

<span class="k">return</span> <span class="k">function</span> <span class="p">(</span><span class="nx">RoutingConfigurator</span> <span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;blog_list&#39;</span><span class="p">,</span> <span class="s1">&#39;/blog&#39;</span><span class="p">)</span>
        <span class="c1">// the controller value has the format [controller_class, method_name]</span>
        <span class="o">-&gt;</span><span class="na">controller</span><span class="p">([</span><span class="nx">BlogController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;list&#39;</span><span class="p">])</span>

        <span class="c1">// if the action is implemented as the __invoke() method of the</span>
        <span class="c1">// controller class, you can skip the &#39;method_name&#39; part:</span>
        <span class="c1">// -&gt;controller(BlogController::class)</span>
    <span class="p">;</span>
<span class="p">};</span>
</pre></div>
</td></tr></table></div>
</li>
</ul>
</div>
</div>
<div class="section" id="matching-http-methods">
<span id="routing-matching-http-methods"></span><h3>Matching HTTP Methods<a class="headerlink" href="#matching-http-methods" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>By default, routes match any HTTP verb (<code class="docutils literal"><span class="pre">GET</span></code>, <code class="docutils literal"><span class="pre">POST</span></code>, <code class="docutils literal"><span class="pre">PUT</span></code>, etc.)
Use the <code class="docutils literal"><span class="pre">methods</span></code> option to restrict the verbs each route should respond to:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Annotations</em><div class="highlight-php-annotations"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Controller/BlogApiController.php</span>
<span class="k">namespace</span> <span class="nx">App\Controller</span><span class="p">;</span>

<span class="c1">// ...</span>

<span class="k">class</span> <span class="nc">BlogApiController</span> <span class="k">extends</span> <span class="nx">AbstractController</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @Route(&quot;/api/posts/{id}&quot;, methods={&quot;GET&quot;,&quot;HEAD&quot;})</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">show</span><span class="p">(</span><span class="nx">int</span> <span class="nv">$id</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// ... return a JSON response with the post</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * @Route(&quot;/api/posts/{id}&quot;, methods={&quot;PUT&quot;})</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">edit</span><span class="p">(</span><span class="nx">int</span> <span class="nv">$id</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// ... edit a post</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>YAML</em><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># config/routes.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">api_post_show</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">path</span><span class="p p-Indicator">:</span>       <span class="l l-Scalar l-Scalar-Plain">/api/posts/{id}</span>
    <span class="l l-Scalar l-Scalar-Plain">controller</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">App\Controller\BlogApiController::show</span>
    <span class="l l-Scalar l-Scalar-Plain">methods</span><span class="p p-Indicator">:</span>    <span class="l l-Scalar l-Scalar-Plain">GET|HEAD</span>

<span class="l l-Scalar l-Scalar-Plain">api_post_edit</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">path</span><span class="p p-Indicator">:</span>       <span class="l l-Scalar l-Scalar-Plain">/api/posts/{id}</span>
    <span class="l l-Scalar l-Scalar-Plain">controller</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">App\Controller\BlogApiController::edit</span>
    <span class="l l-Scalar l-Scalar-Plain">methods</span><span class="p p-Indicator">:</span>    <span class="l l-Scalar l-Scalar-Plain">PUT</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>XML</em><div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">&lt;!-- config/routes.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;routes</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/routing&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/routing</span>
<span class="s">        https://symfony.com/schema/routing/routing-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;api_post_show&quot;</span> <span class="na">path=</span><span class="s">&quot;/api/posts/{id}&quot;</span>
        <span class="na">controller=</span><span class="s">&quot;App\Controller\BlogApiController::show&quot;</span>
        <span class="na">methods=</span><span class="s">&quot;GET|HEAD&quot;</span><span class="nt">/&gt;</span>

    <span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;api_post_edit&quot;</span> <span class="na">path=</span><span class="s">&quot;/api/posts/{id}&quot;</span>
        <span class="na">controller=</span><span class="s">&quot;App\Controller\BlogApiController::edit&quot;</span>
        <span class="na">methods=</span><span class="s">&quot;PUT&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/routes&gt;</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>PHP</em><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// config/routes.php</span>
<span class="k">use</span> <span class="nx">App\Controller\BlogApiController</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Loader\Configurator\RoutingConfigurator</span><span class="p">;</span>

<span class="k">return</span> <span class="k">function</span> <span class="p">(</span><span class="nx">RoutingConfigurator</span> <span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;api_post_show&#39;</span><span class="p">,</span> <span class="s1">&#39;/api/posts/{id}&#39;</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="na">controller</span><span class="p">([</span><span class="nx">BlogApiController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;show&#39;</span><span class="p">])</span>
        <span class="o">-&gt;</span><span class="na">methods</span><span class="p">([</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;HEAD&#39;</span><span class="p">])</span>
    <span class="p">;</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;api_post_edit&#39;</span><span class="p">,</span> <span class="s1">&#39;/api/posts/{id}&#39;</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="na">controller</span><span class="p">([</span><span class="nx">BlogApiController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;edit&#39;</span><span class="p">])</span>
        <span class="o">-&gt;</span><span class="na">methods</span><span class="p">([</span><span class="s1">&#39;PUT&#39;</span><span class="p">])</span>
    <span class="p">;</span>
<span class="p">};</span>
</pre></div>
</td></tr></table></div>
</li>
</ul>
</div>
<div class="admonition tip">
<p class="first admonition-title">ちなみに</p>
<p class="last">HTML forms only support <code class="docutils literal"><span class="pre">GET</span></code> and <code class="docutils literal"><span class="pre">POST</span></code> methods. If you&#8217;re calling a
route with a different method from an HTML form, add a hidden field called
<code class="docutils literal"><span class="pre">_method</span></code> with the method to use (e.g. <code class="docutils literal"><span class="pre">&lt;input</span> <span class="pre">type=&quot;hidden&quot;</span> <span class="pre">name=&quot;_method&quot;</span> <span class="pre">value=&quot;PUT&quot;/&gt;</span></code>).
If you create your forms with <a class="reference internal" href="forms.html"><em>Symfony Forms</em></a> this is done
automatically for you.</p>
</div>
</div>
<div class="section" id="matching-expressions">
<span id="routing-matching-expressions"></span><h3>Matching Expressions<a class="headerlink" href="#matching-expressions" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>Use the <code class="docutils literal"><span class="pre">condition</span></code> option if you need some route to match based on some
arbitrary matching logic:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Annotations</em><div class="highlight-php-annotations"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Controller/DefaultController.php</span>
<span class="k">namespace</span> <span class="nx">App\Controller</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Bundle\FrameworkBundle\Controller\AbstractController</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Annotation\Route</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">DefaultController</span> <span class="k">extends</span> <span class="nx">AbstractController</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @Route(</span>
<span class="sd">     *     &quot;/contact&quot;,</span>
<span class="sd">     *     name=&quot;contact&quot;,</span>
<span class="sd">     *     condition=&quot;context.getMethod() in [&#39;GET&#39;, &#39;HEAD&#39;] and request.headers.get(&#39;User-Agent&#39;) matches &#39;/firefox/i&#39;&quot;</span>
<span class="sd">     * )</span>
<span class="sd">     *</span>
<span class="sd">     * expressions can also include config parameters:</span>
<span class="sd">     * condition: &quot;request.headers.get(&#39;User-Agent&#39;) matches &#39;%app.allowed_browsers%&#39;&quot;</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">contact</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>YAML</em><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># config/routes.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">contact</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">path</span><span class="p p-Indicator">:</span>       <span class="l l-Scalar l-Scalar-Plain">/contact</span>
    <span class="l l-Scalar l-Scalar-Plain">controller</span><span class="p p-Indicator">:</span> <span class="s">&#39;App\Controller\DefaultController::contact&#39;</span>
    <span class="l l-Scalar l-Scalar-Plain">condition</span><span class="p p-Indicator">:</span>  <span class="s">&quot;context.getMethod()</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">[&#39;GET&#39;,</span><span class="nv"> </span><span class="s">&#39;HEAD&#39;]</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">request.headers.get(&#39;User-Agent&#39;)</span><span class="nv"> </span><span class="s">matches</span><span class="nv"> </span><span class="s">&#39;/firefox/i&#39;&quot;</span>
    <span class="c1"># expressions can also include config parameters:</span>
    <span class="c1"># condition: &quot;request.headers.get(&#39;User-Agent&#39;) matches &#39;%app.allowed_browsers%&#39;&quot;</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>XML</em><div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">&lt;!-- config/routes.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;routes</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/routing&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/routing</span>
<span class="s">        https://symfony.com/schema/routing/routing-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;contact&quot;</span> <span class="na">path=</span><span class="s">&quot;/contact&quot;</span> <span class="na">controller=</span><span class="s">&quot;App\Controller\DefaultController::contact&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;condition&gt;</span>context.getMethod() in [&#39;GET&#39;, &#39;HEAD&#39;] and request.headers.get(&#39;User-Agent&#39;) matches &#39;/firefox/i&#39;<span class="nt">&lt;/condition&gt;</span>
        <span class="c">&lt;!-- expressions can also include config parameters: --&gt;</span>
        <span class="c">&lt;!-- &lt;condition&gt;request.headers.get(&#39;User-Agent&#39;) matches &#39;%app.allowed_browsers%&#39;&lt;/condition&gt; --&gt;</span>
    <span class="nt">&lt;/route&gt;</span>
<span class="nt">&lt;/routes&gt;</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>PHP</em><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// config/routes.php</span>
<span class="k">use</span> <span class="nx">App\Controller\DefaultController</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Loader\Configurator\RoutingConfigurator</span><span class="p">;</span>

<span class="k">return</span> <span class="k">function</span> <span class="p">(</span><span class="nx">RoutingConfigurator</span> <span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;contact&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="na">controller</span><span class="p">([</span><span class="nx">DefaultController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;contact&#39;</span><span class="p">])</span>
        <span class="o">-&gt;</span><span class="na">condition</span><span class="p">(</span><span class="s1">&#39;context.getMethod() in [&quot;GET&quot;, &quot;HEAD&quot;] and request.headers.get(&quot;User-Agent&quot;) matches &quot;/firefox/i&quot;&#39;</span><span class="p">)</span>
        <span class="c1">// expressions can also include config parameters:</span>
        <span class="c1">// &#39;request.headers.get(&quot;User-Agent&quot;) matches &quot;%app.allowed_browsers%&quot;&#39;</span>
    <span class="p">;</span>
<span class="p">};</span>
</pre></div>
</td></tr></table></div>
</li>
</ul>
</div>
<p>The value of the <code class="docutils literal"><span class="pre">condition</span></code> option is any valid
<a class="reference internal" href="components/expression_language/syntax.html"><em>ExpressionLanguage expression</em></a>
and can use any of these variables created by Symfony:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">context</span></code></dt>
<dd>An instance of <code class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/Routing/RequestContext.html" title="Symfony\Component\Routing\RequestContext"><span class="pre">RequestContext</span></a></code>,
which holds the most fundamental information about the route being matched.</dd>
<dt><code class="docutils literal"><span class="pre">request</span></code></dt>
<dd>The <a class="reference internal" href="components/http_foundation.html#component-http-foundation-request"><span>Symfony Request</span></a> object that
represents the current request.</dd>
</dl>
<p>Behind the scenes, expressions are compiled down to raw PHP. Because of this,
using the <code class="docutils literal"><span class="pre">condition</span></code> key causes no extra overhead beyond the time it takes
for the underlying PHP to execute.</p>
<div class="admonition caution">
<p class="first admonition-title">ご用心</p>
<p class="last">Conditions are <em>not</em> taken into account when generating URLs (which is
explained later in this article).</p>
</div>
</div>
<div class="section" id="debugging-routes">
<h3>Debugging Routes<a class="headerlink" href="#debugging-routes" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>As your application grows, you&#8217;ll eventually have a <em>lot</em> of routes. Symfony
includes some commands to help you debug routing issues. First, the <code class="docutils literal"><span class="pre">debug:router</span></code>
command lists all your application routes in the same order in which Symfony
evaluates them:</p>
<div class="highlight-terminal"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">$</span> php bin/console debug:router

<span class="go">----------------  -------  -------  -----  --------------------------------------------</span>
<span class="go">Name              Method   Scheme   Host   Path</span>
<span class="go">----------------  -------  -------  -----  --------------------------------------------</span>
<span class="go">homepage          ANY      ANY      ANY    /</span>
<span class="go">contact           GET      ANY      ANY    /contact</span>
<span class="go">contact_process   POST     ANY      ANY    /contact</span>
<span class="go">article_show      ANY      ANY      ANY    /articles/{_locale}/{year}/{title}.{_format}</span>
<span class="go">blog              ANY      ANY      ANY    /blog/{page}</span>
<span class="go">blog_show         ANY      ANY      ANY    /blog/{slug}</span>
<span class="go">----------------  -------  -------  -----  --------------------------------------------</span>
</pre></div>
</td></tr></table></div>
<p>Pass the name (or part of the name) of some route to this argument to print the
route details:</p>
<div class="highlight-terminal"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">$</span> php bin/console debug:router app_lucky_number

<span class="go">+-------------+---------------------------------------------------------+</span>
<span class="go">| Property    | Value                                                   |</span>
<span class="go">+-------------+---------------------------------------------------------+</span>
<span class="go">| Route Name  | app_lucky_number                                        |</span>
<span class="go">| Path        | /lucky/number/{max}                                     |</span>
<span class="go">| ...         | ...                                                     |</span>
<span class="go">| Options     | compiler_class: Symfony\Component\Routing\RouteCompiler |</span>
<span class="go">|             | utf8: true                                              |</span>
<span class="go">+-------------+---------------------------------------------------------+</span>
</pre></div>
</td></tr></table></div>
<p>The other command is called <code class="docutils literal"><span class="pre">router:match</span></code> and it shows which route will match
the given URL. It&#8217;s useful to find out why some URL is not executing the
controller action that you expect:</p>
<div class="highlight-terminal"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">$</span> php bin/console router:match /lucky/number/8

<span class="go">  [OK] Route &quot;app_lucky_number&quot; matches</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="route-parameters">
<h2>Route Parameters<a class="headerlink" href="#route-parameters" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>The previous examples defined routes where the URL never changes (e.g. <code class="docutils literal"><span class="pre">/blog</span></code>).
However, it&#8217;s common to define routes where some parts are variable. For example,
the URL to display some blog post will probably include the title or slug
(e.g. <code class="docutils literal"><span class="pre">/blog/my-first-post</span></code> or <code class="docutils literal"><span class="pre">/blog/all-about-symfony</span></code>).</p>
<p>In Symfony routes, variable parts are wrapped in <code class="docutils literal"><span class="pre">{</span> <span class="pre">...</span> <span class="pre">}</span></code> and they must have
a unique name. For example, the route to display the blog post contents is
defined as <code class="docutils literal"><span class="pre">/blog/{slug}</span></code>:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Annotations</em><div class="highlight-php-annotations"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Controller/BlogController.php</span>
<span class="k">namespace</span> <span class="nx">App\Controller</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Bundle\FrameworkBundle\Controller\AbstractController</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Annotation\Route</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">BlogController</span> <span class="k">extends</span> <span class="nx">AbstractController</span>
<span class="p">{</span>
    <span class="c1">// ...</span>

    <span class="sd">/**</span>
<span class="sd">     * @Route(&quot;/blog/{slug}&quot;, name=&quot;blog_show&quot;)</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">show</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$slug</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// $slug will equal the dynamic part of the URL</span>
        <span class="c1">// e.g. at /blog/yay-routing, then $slug=&#39;yay-routing&#39;</span>

        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>YAML</em><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># config/routes.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">blog_show</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">path</span><span class="p p-Indicator">:</span>       <span class="l l-Scalar l-Scalar-Plain">/blog/{slug}</span>
    <span class="l l-Scalar l-Scalar-Plain">controller</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">App\Controller\BlogController::show</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>XML</em><div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">&lt;!-- config/routes.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;routes</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/routing&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/routing</span>
<span class="s">        https://symfony.com/schema/routing/routing-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;blog_show&quot;</span> <span class="na">path=</span><span class="s">&quot;/blog/{slug}&quot;</span>
           <span class="na">controller=</span><span class="s">&quot;App\Controller\BlogController::show&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/routes&gt;</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>PHP</em><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// config/routes.php</span>
<span class="k">use</span> <span class="nx">App\Controller\BlogController</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Loader\Configurator\RoutingConfigurator</span><span class="p">;</span>

<span class="k">return</span> <span class="k">function</span> <span class="p">(</span><span class="nx">RoutingConfigurator</span> <span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;blog_show&#39;</span><span class="p">,</span> <span class="s1">&#39;/blog/{slug}&#39;</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="na">controller</span><span class="p">([</span><span class="nx">BlogController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;show&#39;</span><span class="p">])</span>
    <span class="p">;</span>
<span class="p">};</span>
</pre></div>
</td></tr></table></div>
</li>
</ul>
</div>
<p>The name of the variable part (<code class="docutils literal"><span class="pre">{slug}</span></code> in this example) is used to create a
PHP variable where that route content is stored and passed to the controller.
If a user visits the <code class="docutils literal"><span class="pre">/blog/my-first-post</span></code> URL, Symfony executes the <code class="docutils literal"><span class="pre">show()</span></code>
method in the <code class="docutils literal"><span class="pre">BlogController</span></code> class and passes a <code class="docutils literal"><span class="pre">$slug</span> <span class="pre">=</span> <span class="pre">'my-first-post'</span></code>
argument to the <code class="docutils literal"><span class="pre">show()</span></code> method.</p>
<p>Routes can define any number of parameters, but each of them can only be used
once on each route (e.g. <code class="docutils literal"><span class="pre">/blog/posts-about-{category}/page/{pageNumber}</span></code>).</p>
<div class="section" id="parameters-validation">
<span id="routing-requirements"></span><h3>Parameters Validation<a class="headerlink" href="#parameters-validation" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>Imagine that your application has a <code class="docutils literal"><span class="pre">blog_show</span></code> route (URL: <code class="docutils literal"><span class="pre">/blog/{slug}</span></code>)
and a <code class="docutils literal"><span class="pre">blog_list</span></code> route (URL: <code class="docutils literal"><span class="pre">/blog/{page}</span></code>). Given that route parameters
accept any value, there&#8217;s no way to differentiate both routes.</p>
<p>If the user requests <code class="docutils literal"><span class="pre">/blog/my-first-post</span></code>, both routes will match and Symfony
will use the route which was defined first. To fix this, add some validation to
the <code class="docutils literal"><span class="pre">{page}</span></code> parameter using the <code class="docutils literal"><span class="pre">requirements</span></code> option:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Annotations</em><div class="highlight-php-annotations"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Controller/BlogController.php</span>
<span class="k">namespace</span> <span class="nx">App\Controller</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Bundle\FrameworkBundle\Controller\AbstractController</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Annotation\Route</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">BlogController</span> <span class="k">extends</span> <span class="nx">AbstractController</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @Route(&quot;/blog/{page}&quot;, name=&quot;blog_list&quot;, requirements={&quot;page&quot;=&quot;\d+&quot;})</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">list</span><span class="p">(</span><span class="nx">int</span> <span class="nv">$page</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * @Route(&quot;/blog/{slug}&quot;, name=&quot;blog_show&quot;)</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">show</span><span class="p">(</span><span class="nv">$slug</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>YAML</em><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># config/routes.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">blog_list</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">path</span><span class="p p-Indicator">:</span>       <span class="l l-Scalar l-Scalar-Plain">/blog/{page}</span>
    <span class="l l-Scalar l-Scalar-Plain">controller</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">App\Controller\BlogController::list</span>
    <span class="l l-Scalar l-Scalar-Plain">requirements</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">page</span><span class="p p-Indicator">:</span> <span class="s">&#39;\d+&#39;</span>

<span class="l l-Scalar l-Scalar-Plain">blog_show</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">path</span><span class="p p-Indicator">:</span>       <span class="l l-Scalar l-Scalar-Plain">/blog/{slug}</span>
    <span class="l l-Scalar l-Scalar-Plain">controller</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">App\Controller\BlogController::show</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>XML</em><div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">&lt;!-- config/routes.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;routes</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/routing&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/routing</span>
<span class="s">        https://symfony.com/schema/routing/routing-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;blog_list&quot;</span> <span class="na">path=</span><span class="s">&quot;/blog/{page}&quot;</span> <span class="na">controller=</span><span class="s">&quot;App\Controller\BlogController::list&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;requirement</span> <span class="na">key=</span><span class="s">&quot;page&quot;</span><span class="nt">&gt;</span>\d+<span class="nt">&lt;/requirement&gt;</span>
    <span class="nt">&lt;/route&gt;</span>

    <span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;blog_show&quot;</span> <span class="na">path=</span><span class="s">&quot;/blog/{slug}&quot;</span>
           <span class="na">controller=</span><span class="s">&quot;App\Controller\BlogController::show&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/routes&gt;</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>PHP</em><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// config/routes.php</span>
<span class="k">use</span> <span class="nx">App\Controller\BlogController</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Loader\Configurator\RoutingConfigurator</span><span class="p">;</span>

<span class="k">return</span> <span class="k">function</span> <span class="p">(</span><span class="nx">RoutingConfigurator</span> <span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;blog_list&#39;</span><span class="p">,</span> <span class="s1">&#39;/blog/{page}&#39;</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="na">controller</span><span class="p">([</span><span class="nx">BlogController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;list&#39;</span><span class="p">])</span>
        <span class="o">-&gt;</span><span class="na">requirements</span><span class="p">([</span><span class="s1">&#39;page&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;\d+&#39;</span><span class="p">])</span>
    <span class="p">;</span>

    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;blog_show&#39;</span><span class="p">,</span> <span class="s1">&#39;/blog/{slug}&#39;</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="na">controller</span><span class="p">([</span><span class="nx">BlogController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;show&#39;</span><span class="p">])</span>
    <span class="p">;</span>
    <span class="c1">// ...</span>
<span class="p">};</span>
</pre></div>
</td></tr></table></div>
</li>
</ul>
</div>
<p>The <code class="docutils literal"><span class="pre">requirements</span></code> option defines the <a class="reference external" href="https://www.php.net/manual/en/book.pcre.php">PHP regular expressions</a> that route
parameters must match for the entire route to match. In this example, <code class="docutils literal"><span class="pre">\d+</span></code> is
a regular expression that matches a <em>digit</em> of any length. Now:</p>
<table border="1" class="docutils">
<colgroup>
<col width="35%" />
<col width="19%" />
<col width="46%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Route</th>
<th class="head">Parameters</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">/blog/2</span></code></td>
<td><code class="docutils literal"><span class="pre">blog_list</span></code></td>
<td><code class="docutils literal"><span class="pre">$page</span></code> = <code class="docutils literal"><span class="pre">2</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">/blog/my-first-post</span></code></td>
<td><code class="docutils literal"><span class="pre">blog_show</span></code></td>
<td><code class="docutils literal"><span class="pre">$slug</span></code> = <code class="docutils literal"><span class="pre">my-first-post</span></code></td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="first admonition-title">ちなみに</p>
<p class="last">Route requirements (and route paths too) can include
<a class="reference internal" href="configuration.html#configuration-parameters"><span>container parameters</span></a>, which is useful to
define complex regular expressions once and reuse them in multiple routes.</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">ちなみに</p>
<p class="last">Parameters also support <a class="reference external" href="https://www.php.net/manual/en/regexp.reference.unicode.php">PCRE Unicode properties</a>, which are escape
sequences that match generic character types. For example, <code class="docutils literal"><span class="pre">\p{Lu}</span></code>
matches any uppercase character in any language, <code class="docutils literal"><span class="pre">\p{Greek}</span></code> matches any
Greek character, etc.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">When using regular expressions in route parameters, you can set the <code class="docutils literal"><span class="pre">utf8</span></code>
route option to <code class="docutils literal"><span class="pre">true</span></code> to make any <code class="docutils literal"><span class="pre">.</span></code> character match any UTF-8
characters instead of just a single byte.</p>
</div>
<p>If you prefer, requirements can be inlined in each parameter using the syntax
<code class="docutils literal"><span class="pre">{parameter_name&lt;requirements&gt;}</span></code>. This feature makes configuration more
concise, but it can decrease route readability when requirements are complex:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Annotations</em><div class="highlight-php-annotations"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Controller/BlogController.php</span>
<span class="k">namespace</span> <span class="nx">App\Controller</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Bundle\FrameworkBundle\Controller\AbstractController</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Annotation\Route</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">BlogController</span> <span class="k">extends</span> <span class="nx">AbstractController</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @Route(&quot;/blog/{page&lt;\d+&gt;}&quot;, name=&quot;blog_list&quot;)</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">list</span><span class="p">(</span><span class="nx">int</span> <span class="nv">$page</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>YAML</em><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># config/routes.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">blog_list</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">path</span><span class="p p-Indicator">:</span>       <span class="l l-Scalar l-Scalar-Plain">/blog/{page&lt;\d+&gt;}</span>
    <span class="l l-Scalar l-Scalar-Plain">controller</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">App\Controller\BlogController::list</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>XML</em><div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">&lt;!-- config/routes.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;routes</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/routing&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/routing</span>
<span class="s">        https://symfony.com/schema/routing/routing-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;blog_list&quot;</span> <span class="na">path=</span><span class="s">&quot;/blog/{page&lt;\d+&gt;}&quot;</span>
           <span class="na">controller=</span><span class="s">&quot;App\Controller\BlogController::list&quot;</span><span class="nt">/&gt;</span>

    <span class="c">&lt;!-- ... --&gt;</span>
<span class="nt">&lt;/routes&gt;</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>PHP</em><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// config/routes.php</span>
<span class="k">use</span> <span class="nx">App\Controller\BlogController</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Loader\Configurator\RoutingConfigurator</span><span class="p">;</span>

<span class="k">return</span> <span class="k">function</span> <span class="p">(</span><span class="nx">RoutingConfigurator</span> <span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;blog_list&#39;</span><span class="p">,</span> <span class="s1">&#39;/blog/{page&lt;\d+&gt;}&#39;</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="na">controller</span><span class="p">([</span><span class="nx">BlogController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;list&#39;</span><span class="p">])</span>
    <span class="p">;</span>
    <span class="c1">// ...</span>
<span class="p">};</span>
</pre></div>
</td></tr></table></div>
</li>
</ul>
</div>
</div>
<div class="section" id="optional-parameters">
<h3>Optional Parameters<a class="headerlink" href="#optional-parameters" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>In the previous example, the URL of <code class="docutils literal"><span class="pre">blog_list</span></code> is <code class="docutils literal"><span class="pre">/blog/{page}</span></code>. If users
visit <code class="docutils literal"><span class="pre">/blog/1</span></code>, it will match. But if they visit <code class="docutils literal"><span class="pre">/blog</span></code>, it will <strong>not</strong>
match. As soon as you add a parameter to a route, it must have a value.</p>
<p>You can make <code class="docutils literal"><span class="pre">blog_list</span></code> once again match when the user visits <code class="docutils literal"><span class="pre">/blog</span></code> by
adding a default value for the <code class="docutils literal"><span class="pre">{page}</span></code> parameter. When using annotations,
default values are defined in the arguments of the controller action. In the
other configuration formats they are defined with the <code class="docutils literal"><span class="pre">defaults</span></code> option:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Annotations</em><div class="highlight-php-annotations"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Controller/BlogController.php</span>
<span class="k">namespace</span> <span class="nx">App\Controller</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Bundle\FrameworkBundle\Controller\AbstractController</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Annotation\Route</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">BlogController</span> <span class="k">extends</span> <span class="nx">AbstractController</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @Route(&quot;/blog/{page}&quot;, name=&quot;blog_list&quot;, requirements={&quot;page&quot;=&quot;\d+&quot;})</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">list</span><span class="p">(</span><span class="nx">int</span> <span class="nv">$page</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>YAML</em><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># config/routes.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">blog_list</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">path</span><span class="p p-Indicator">:</span>       <span class="l l-Scalar l-Scalar-Plain">/blog/{page}</span>
    <span class="l l-Scalar l-Scalar-Plain">controller</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">App\Controller\BlogController::list</span>
    <span class="l l-Scalar l-Scalar-Plain">defaults</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">page</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
    <span class="l l-Scalar l-Scalar-Plain">requirements</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">page</span><span class="p p-Indicator">:</span> <span class="s">&#39;\d+&#39;</span>

<span class="l l-Scalar l-Scalar-Plain">blog_show</span><span class="p p-Indicator">:</span>
    <span class="c1"># ...</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>XML</em><div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">&lt;!-- config/routes.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;routes</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/routing&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/routing</span>
<span class="s">        https://symfony.com/schema/routing/routing-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;blog_list&quot;</span> <span class="na">path=</span><span class="s">&quot;/blog/{page}&quot;</span> <span class="na">controller=</span><span class="s">&quot;App\Controller\BlogController::list&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;default</span> <span class="na">key=</span><span class="s">&quot;page&quot;</span><span class="nt">&gt;</span>1<span class="nt">&lt;/default&gt;</span>

        <span class="nt">&lt;requirement</span> <span class="na">key=</span><span class="s">&quot;page&quot;</span><span class="nt">&gt;</span>\d+<span class="nt">&lt;/requirement&gt;</span>
    <span class="nt">&lt;/route&gt;</span>

    <span class="c">&lt;!-- ... --&gt;</span>
<span class="nt">&lt;/routes&gt;</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>PHP</em><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// config/routes.php</span>
<span class="k">use</span> <span class="nx">App\Controller\BlogController</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Loader\Configurator\RoutingConfigurator</span><span class="p">;</span>

<span class="k">return</span> <span class="k">function</span> <span class="p">(</span><span class="nx">RoutingConfigurator</span> <span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;blog_list&#39;</span><span class="p">,</span> <span class="s1">&#39;/blog/{page}&#39;</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="na">controller</span><span class="p">([</span><span class="nx">BlogController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;list&#39;</span><span class="p">])</span>
        <span class="o">-&gt;</span><span class="na">defaults</span><span class="p">([</span><span class="s1">&#39;page&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">])</span>
        <span class="o">-&gt;</span><span class="na">requirements</span><span class="p">([</span><span class="s1">&#39;page&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;\d+&#39;</span><span class="p">])</span>
    <span class="p">;</span>
<span class="p">};</span>
</pre></div>
</td></tr></table></div>
</li>
</ul>
</div>
<p>Now, when the user visits <code class="docutils literal"><span class="pre">/blog</span></code>, the <code class="docutils literal"><span class="pre">blog_list</span></code> route will match and
<code class="docutils literal"><span class="pre">$page</span></code> will default to a value of <code class="docutils literal"><span class="pre">1</span></code>.</p>
<div class="admonition caution">
<p class="first admonition-title">ご用心</p>
<p class="last">You can have more than one optional parameter (e.g. <code class="docutils literal"><span class="pre">/blog/{slug}/{page}</span></code>),
but everything after an optional parameter must be optional. For example,
<code class="docutils literal"><span class="pre">/{page}/blog</span></code> is a valid path, but <code class="docutils literal"><span class="pre">page</span></code> will always be required
(i.e. <code class="docutils literal"><span class="pre">/blog</span></code> will not match this route).</p>
</div>
<p>If you want to always include some default value in the generated URL (for
example to force the generation of <code class="docutils literal"><span class="pre">/blog/1</span></code> instead of <code class="docutils literal"><span class="pre">/blog</span></code> in the
previous example) add the <code class="docutils literal"><span class="pre">!</span></code> character before the parameter name: <code class="docutils literal"><span class="pre">/blog/{!page}</span></code></p>
<p>As it happens with requirements, default values can also be inlined in each
parameter using the syntax <code class="docutils literal"><span class="pre">{parameter_name?default_value}</span></code>. This feature
is compatible with inlined requirements, so you can inline both in a single
parameter:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Annotations</em><div class="highlight-php-annotations"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Controller/BlogController.php</span>
<span class="k">namespace</span> <span class="nx">App\Controller</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Bundle\FrameworkBundle\Controller\AbstractController</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Annotation\Route</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">BlogController</span> <span class="k">extends</span> <span class="nx">AbstractController</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @Route(&quot;/blog/{page&lt;\d+&gt;?1}&quot;, name=&quot;blog_list&quot;)</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">list</span><span class="p">(</span><span class="nx">int</span> <span class="nv">$page</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>YAML</em><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># config/routes.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">blog_list</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">path</span><span class="p p-Indicator">:</span>       <span class="l l-Scalar l-Scalar-Plain">/blog/{page&lt;\d+&gt;?1}</span>
    <span class="l l-Scalar l-Scalar-Plain">controller</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">App\Controller\BlogController::list</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>XML</em><div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">&lt;!-- config/routes.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;routes</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/routing&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/routing</span>
<span class="s">        https://symfony.com/schema/routing/routing-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;blog_list&quot;</span> <span class="na">path=</span><span class="s">&quot;/blog/{page&lt;\d+&gt;?1}&quot;</span>
           <span class="na">controller=</span><span class="s">&quot;App\Controller\BlogController::list&quot;</span><span class="nt">/&gt;</span>

    <span class="c">&lt;!-- ... --&gt;</span>
<span class="nt">&lt;/routes&gt;</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>PHP</em><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// config/routes.php</span>
<span class="k">use</span> <span class="nx">App\Controller\BlogController</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Loader\Configurator\RoutingConfigurator</span><span class="p">;</span>

<span class="k">return</span> <span class="k">function</span> <span class="p">(</span><span class="nx">RoutingConfigurator</span> <span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;blog_list&#39;</span><span class="p">,</span> <span class="s1">&#39;/blog/{page&lt;\d+&gt;?1}&#39;</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="na">controller</span><span class="p">([</span><span class="nx">BlogController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;list&#39;</span><span class="p">])</span>
    <span class="p">;</span>
<span class="p">};</span>
</pre></div>
</td></tr></table></div>
</li>
</ul>
</div>
<div class="admonition tip">
<p class="first admonition-title">ちなみに</p>
<p class="last">To give a <code class="docutils literal"><span class="pre">null</span></code> default value to any parameter, add nothing after the
<code class="docutils literal"><span class="pre">?</span></code> character (e.g. <code class="docutils literal"><span class="pre">/blog/{page?}</span></code>).</p>
</div>
</div>
<div class="section" id="priority-parameter">
<h3>Priority Parameter<a class="headerlink" href="#priority-parameter" title="このヘッドラインへのパーマリンク">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified">バージョン 5.1 で追加: </span>The <code class="docutils literal"><span class="pre">priority</span></code> parameter was introduced in Symfony 5.1</p>
</div>
<p>When defining a greedy pattern that matches many routes, this may be at the
beginning of your routing collection and prevents any route defined after to be
matched.
A <code class="docutils literal"><span class="pre">priority</span></code> optional parameter is available in order to let you choose the
order of your routes, and it is only available when using annotations.</p>
<div class="highlight-php-annotations"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Controller/BlogController.php</span>
<span class="k">namespace</span> <span class="nx">App\Controller</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Bundle\FrameworkBundle\Controller\AbstractController</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Annotation\Route</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">BlogController</span> <span class="k">extends</span> <span class="nx">AbstractController</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * This route has a greedy pattern and is defined first.</span>
<span class="sd">     *</span>
<span class="sd">     * @Route(&quot;/blog/{slug}&quot;, name=&quot;blog_show&quot;)</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">show</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$slug</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * This route could not be matched without defining a higher priority than 0.</span>
<span class="sd">     *</span>
<span class="sd">     * @Route(&quot;/blog/list&quot;, name=&quot;blog_list&quot;, priority=2)</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">list</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>The priority parameter expects an integer value. Routes with higher priority
are sorted before routes with lower priority. The default value when it is not
defined is <code class="docutils literal"><span class="pre">0</span></code>.</p>
</div>
<div class="section" id="parameter-conversion">
<h3>Parameter Conversion<a class="headerlink" href="#parameter-conversion" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>A common routing need is to convert the value stored in some parameter (e.g. an
integer acting as the user ID) into another value (e.g. the object that
represents the user). This feature is called &#8220;param converter&#8221; and is only
available when using annotations to define routes.</p>
<p>In case you didn&#8217;t run this command before, run it now to add support for
annotations and &#8220;param converters&#8221;:</p>
<div class="highlight-terminal"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">$</span> composer require annotations
</pre></div>
</td></tr></table></div>
<p>Now, keep the previous route configuration, but change the arguments of the
controller action. Instead of <code class="docutils literal"><span class="pre">string</span> <span class="pre">$slug</span></code>, add <code class="docutils literal"><span class="pre">BlogPost</span> <span class="pre">$post</span></code>:</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="c1">// src/Controller/BlogController.php</span>
<span class="k">namespace</span> <span class="nx">App\Controller</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">App\Entity\BlogPost</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Bundle\FrameworkBundle\Controller\AbstractController</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Annotation\Route</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">BlogController</span> <span class="k">extends</span> <span class="nx">AbstractController</span>
<span class="p">{</span>
    <span class="c1">// ...</span>

    <span class="sd">/**</span>
<span class="sd">     * @Route(&quot;/blog/{slug}&quot;, name=&quot;blog_show&quot;)</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">show</span><span class="p">(</span><span class="nx">BlogPost</span> <span class="nv">$post</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// $post is the object whose slug matches the routing parameter</span>

        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If your controller arguments include type-hints for objects (<code class="docutils literal"><span class="pre">BlogPost</span></code> in
this case), the &#8220;param converter&#8221; makes a database request to find the object
using the request parameters (<code class="docutils literal"><span class="pre">slug</span></code> in this case). If no object is found,
Symfony generates a 404 response automatically.</p>
<p>Read the <a class="reference external" href="https://symfony.com/doc/current/bundles/SensioFrameworkExtraBundle/annotations/converters.html">full param converter documentation</a> to learn about the converters
provided by Symfony and how to configure them.</p>
</div>
<div class="section" id="special-parameters">
<h3>Special Parameters<a class="headerlink" href="#special-parameters" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>In addition to your own parameters, routes can include any of the following
special parameters created by Symfony:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">_controller</span></code></dt>
<dd>This parameter is used to determine which controller and action is executed
when the route is matched.</dd>
</dl>
<dl class="docutils" id="routing-format-parameter">
<dt><code class="docutils literal"><span class="pre">_format</span></code></dt>
<dd>The matched value is used to set the &#8220;request format&#8221; of the <code class="docutils literal"><span class="pre">Request</span></code> object.
This is used for such things as setting the <code class="docutils literal"><span class="pre">Content-Type</span></code> of the response
(e.g. a <code class="docutils literal"><span class="pre">json</span></code> format translates into a <code class="docutils literal"><span class="pre">Content-Type</span></code> of <code class="docutils literal"><span class="pre">application/json</span></code>).</dd>
<dt><code class="docutils literal"><span class="pre">_fragment</span></code></dt>
<dd>Used to set the fragment identifier, which is the optional last part of a URL that
starts with a <code class="docutils literal"><span class="pre">#</span></code> character and is used to identify a portion of a document.</dd>
</dl>
<dl class="docutils" id="routing-locale-parameter">
<dt><code class="docutils literal"><span class="pre">_locale</span></code></dt>
<dd>Used to set the <a class="reference internal" href="translation/locale.html#translation-locale-url"><span>locale</span></a> on the request.</dd>
</dl>
<p>You can include these attributes (except <code class="docutils literal"><span class="pre">_fragment</span></code>) both in individual routes
and in route imports. Symfony defines some special attributes with the same name
(except for the leading underscore) so you can define them easier:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Annotations</em><div class="highlight-php-annotations"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Controller/ArticleController.php</span>
<span class="k">namespace</span> <span class="nx">App\Controller</span><span class="p">;</span>

<span class="c1">// ...</span>
<span class="k">class</span> <span class="nc">ArticleController</span> <span class="k">extends</span> <span class="nx">AbstractController</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @Route(</span>
<span class="sd">     *     &quot;/articles/{_locale}/search.{_format}&quot;,</span>
<span class="sd">     *     locale=&quot;en&quot;,</span>
<span class="sd">     *     format=&quot;html&quot;,</span>
<span class="sd">     *     requirements={</span>
<span class="sd">     *         &quot;_locale&quot;: &quot;en|fr&quot;,</span>
<span class="sd">     *         &quot;_format&quot;: &quot;html|xml&quot;,</span>
<span class="sd">     *     }</span>
<span class="sd">     * )</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">search</span><span class="p">()</span>
    <span class="p">{</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>YAML</em><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># config/routes.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">article_search</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">path</span><span class="p p-Indicator">:</span>        <span class="l l-Scalar l-Scalar-Plain">/articles/{_locale}/search.{_format}</span>
  <span class="l l-Scalar l-Scalar-Plain">controller</span><span class="p p-Indicator">:</span>  <span class="l l-Scalar l-Scalar-Plain">App\Controller\ArticleController::search</span>
  <span class="l l-Scalar l-Scalar-Plain">locale</span><span class="p p-Indicator">:</span>      <span class="l l-Scalar l-Scalar-Plain">en</span>
  <span class="l l-Scalar l-Scalar-Plain">format</span><span class="p p-Indicator">:</span>      <span class="l l-Scalar l-Scalar-Plain">html</span>
  <span class="l l-Scalar l-Scalar-Plain">requirements</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">_locale</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">en|fr</span>
      <span class="l l-Scalar l-Scalar-Plain">_format</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">html|xml</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>XML</em><div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">&lt;!-- config/routes.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;routes</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/routing&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/routing</span>
<span class="s">        https://symfony.com/schema/routing/routing-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;article_search&quot;</span>
        <span class="na">path=</span><span class="s">&quot;/articles/{_locale}/search.{_format}&quot;</span>
        <span class="na">controller=</span><span class="s">&quot;App\Controller\ArticleController::search&quot;</span>
        <span class="na">locale=</span><span class="s">&quot;en&quot;</span>
        <span class="na">format=</span><span class="s">&quot;html&quot;</span><span class="nt">&gt;</span>

        <span class="nt">&lt;requirement</span> <span class="na">key=</span><span class="s">&quot;_locale&quot;</span><span class="nt">&gt;</span>en|fr<span class="nt">&lt;/requirement&gt;</span>
        <span class="nt">&lt;requirement</span> <span class="na">key=</span><span class="s">&quot;_format&quot;</span><span class="nt">&gt;</span>html|rss<span class="nt">&lt;/requirement&gt;</span>

    <span class="nt">&lt;/route&gt;</span>
<span class="nt">&lt;/routes&gt;</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>PHP</em><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// config/routes.php</span>
<span class="k">namespace</span> <span class="nx">Symfony\Component\Routing\Loader\Configurator</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">App\Controller\ArticleController</span><span class="p">;</span>

<span class="k">return</span> <span class="k">function</span> <span class="p">(</span><span class="nx">RoutingConfigurator</span> <span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;article_show&#39;</span><span class="p">,</span> <span class="s1">&#39;/articles/{_locale}/search.{_format}&#39;</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="na">controller</span><span class="p">([</span><span class="nx">ArticleController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;search&#39;</span><span class="p">])</span>
        <span class="o">-&gt;</span><span class="na">locale</span><span class="p">(</span><span class="s1">&#39;en&#39;</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="na">format</span><span class="p">(</span><span class="s1">&#39;html&#39;</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="na">requirements</span><span class="p">([</span>
            <span class="s1">&#39;_locale&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;en|fr&#39;</span><span class="p">,</span>
            <span class="s1">&#39;_format&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;html|rss&#39;</span><span class="p">,</span>
        <span class="p">])</span>
    <span class="p">;</span>
<span class="p">};</span>
</pre></div>
</td></tr></table></div>
</li>
</ul>
</div>
</div>
<div class="section" id="extra-parameters">
<h3>Extra Parameters<a class="headerlink" href="#extra-parameters" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>In the <code class="docutils literal"><span class="pre">defaults</span></code> option of a route you can optionally define parameters not
included in the route configuration. This is useful to pass extra arguments to
the controllers of the routes:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Annotations</em><div class="highlight-php-annotations"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Controller/BlogController.php</span>
<span class="k">namespace</span> <span class="nx">App\Controller</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Annotation\Route</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">BlogController</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @Route(&quot;/blog/{page}&quot;, name=&quot;blog_index&quot;, defaults={&quot;page&quot;: 1, &quot;title&quot;: &quot;Hello world!&quot;})</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">index</span><span class="p">(</span><span class="nx">int</span> <span class="nv">$page</span><span class="p">,</span> <span class="nx">string</span> <span class="nv">$title</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>YAML</em><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># config/routes.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">blog_index</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">path</span><span class="p p-Indicator">:</span>       <span class="l l-Scalar l-Scalar-Plain">/blog/{page}</span>
    <span class="l l-Scalar l-Scalar-Plain">controller</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">App\Controller\BlogController::index</span>
    <span class="l l-Scalar l-Scalar-Plain">defaults</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">page</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
        <span class="l l-Scalar l-Scalar-Plain">title</span><span class="p p-Indicator">:</span> <span class="s">&quot;Hello</span><span class="nv"> </span><span class="s">world!&quot;</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>XML</em><div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">&lt;!-- config/routes.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;routes</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/routing&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/routing</span>
<span class="s">        https://symfony.com/schema/routing/routing-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;blog_index&quot;</span> <span class="na">path=</span><span class="s">&quot;/blog/{page}&quot;</span> <span class="na">controller=</span><span class="s">&quot;App\Controller\BlogController::index&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;default</span> <span class="na">key=</span><span class="s">&quot;page&quot;</span><span class="nt">&gt;</span>1<span class="nt">&lt;/default&gt;</span>
        <span class="nt">&lt;default</span> <span class="na">key=</span><span class="s">&quot;title&quot;</span><span class="nt">&gt;</span>Hello world!<span class="nt">&lt;/default&gt;</span>
    <span class="nt">&lt;/route&gt;</span>
<span class="nt">&lt;/routes&gt;</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>PHP</em><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// config/routes.php</span>
<span class="k">use</span> <span class="nx">App\Controller\BlogController</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Loader\Configurator\RoutingConfigurator</span><span class="p">;</span>

<span class="k">return</span> <span class="k">function</span> <span class="p">(</span><span class="nx">RoutingConfigurator</span> <span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;blog_index&#39;</span><span class="p">,</span> <span class="s1">&#39;/blog/{page}&#39;</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="na">controller</span><span class="p">([</span><span class="nx">BlogController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">])</span>
        <span class="o">-&gt;</span><span class="na">defaults</span><span class="p">([</span>
            <span class="s1">&#39;page&#39;</span>  <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Hello world!&#39;</span><span class="p">,</span>
        <span class="p">])</span>
    <span class="p">;</span>
<span class="p">};</span>
</pre></div>
</td></tr></table></div>
</li>
</ul>
</div>
</div>
<div class="section" id="slash-characters-in-route-parameters">
<span id="routing-slash-in-parameters"></span><h3>Slash Characters in Route Parameters<a class="headerlink" href="#slash-characters-in-route-parameters" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>Route parameters can contain any values except the <code class="docutils literal"><span class="pre">/</span></code> slash character,
because that&#8217;s the character used to separate the different parts of the URLs.
For example, if the <code class="docutils literal"><span class="pre">token</span></code> value in the <code class="docutils literal"><span class="pre">/share/{token}</span></code> route contains a
<code class="docutils literal"><span class="pre">/</span></code> character, this route won&#8217;t match.</p>
<p>A possible solution is to change the parameter requirements to be more permissive:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Annotations</em><div class="highlight-php-annotations"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Controller/DefaultController.php</span>
<span class="k">namespace</span> <span class="nx">App\Controller</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Annotation\Route</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">DefaultController</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @Route(&quot;/share/{token}&quot;, name=&quot;share&quot;, requirements={&quot;token&quot;=&quot;.+&quot;})</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">share</span><span class="p">(</span><span class="nv">$token</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>YAML</em><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># config/routes.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">share</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">path</span><span class="p p-Indicator">:</span>       <span class="l l-Scalar l-Scalar-Plain">/share/{token}</span>
    <span class="l l-Scalar l-Scalar-Plain">controller</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">App\Controller\DefaultController::share</span>
    <span class="l l-Scalar l-Scalar-Plain">requirements</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">token</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">.+</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>XML</em><div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">&lt;!-- config/routes.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;routes</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/routing&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/routing</span>
<span class="s">        https://symfony.com/schema/routing/routing-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;share&quot;</span> <span class="na">path=</span><span class="s">&quot;/share/{token}&quot;</span> <span class="na">controller=</span><span class="s">&quot;App\Controller\DefaultController::share&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;requirement</span> <span class="na">key=</span><span class="s">&quot;token&quot;</span><span class="nt">&gt;</span>.+<span class="nt">&lt;/requirement&gt;</span>
    <span class="nt">&lt;/route&gt;</span>
<span class="nt">&lt;/routes&gt;</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>PHP</em><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// config/routes.php</span>
<span class="k">use</span> <span class="nx">App\Controller\DefaultController</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Loader\Configurator\RoutingConfigurator</span><span class="p">;</span>

<span class="k">return</span> <span class="k">function</span> <span class="p">(</span><span class="nx">RoutingConfigurator</span> <span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;share&#39;</span><span class="p">,</span> <span class="s1">&#39;/share/{token}&#39;</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="na">controller</span><span class="p">([</span><span class="nx">DefaultController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;share&#39;</span><span class="p">])</span>
        <span class="o">-&gt;</span><span class="na">requirements</span><span class="p">([</span>
            <span class="s1">&#39;token&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;.+&#39;</span><span class="p">,</span>
        <span class="p">])</span>
    <span class="p">;</span>
<span class="p">};</span>
</pre></div>
</td></tr></table></div>
</li>
</ul>
</div>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">If the route defines several parameter and you apply this permissive
regular expression to all of them, you might get unexpected results. For
example, if the route definition is <code class="docutils literal"><span class="pre">/share/{path}/{token}</span></code> and both
<code class="docutils literal"><span class="pre">path</span></code> and <code class="docutils literal"><span class="pre">token</span></code> accept <code class="docutils literal"><span class="pre">/</span></code>. The <code class="docutils literal"><span class="pre">token</span></code> only get the last path
and the rest of the match is matched by the first argument (<code class="docutils literal"><span class="pre">path</span></code>).</p>
</div>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">If the route includes the special <code class="docutils literal"><span class="pre">{_format}</span></code> parameter, you shouldn&#8217;t
use the <code class="docutils literal"><span class="pre">.+</span></code> requirement for the parameters that allow slashes. For example,
if the pattern is <code class="docutils literal"><span class="pre">/share/{token}.{_format}</span></code> and <code class="docutils literal"><span class="pre">{token}</span></code> allows any
character, the <code class="docutils literal"><span class="pre">/share/foo/bar.json</span></code> URL will consider <code class="docutils literal"><span class="pre">foo/bar.json</span></code>
as the token and the format will be empty. This can be solved by replacing
the <code class="docutils literal"><span class="pre">.+</span></code> requirement by <code class="docutils literal"><span class="pre">[^.]+</span></code> to allow any character except dots.</p>
</div>
</div>
</div>
<div class="section" id="route-groups-and-prefixes">
<span id="routing-route-groups"></span><h2>Route Groups and Prefixes<a class="headerlink" href="#route-groups-and-prefixes" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>It&#8217;s common for a group of routes to share some options (e.g. all routes related
to the blog start with <code class="docutils literal"><span class="pre">/blog</span></code>) That&#8217;s why Symfony includes a feature to share
route configuration.</p>
<p>When defining routes as annotations, put the common configuration in the
<code class="docutils literal"><span class="pre">&#64;Route</span></code> annotation of the controller class. In other routing formats, define
the common configuration using options when importing the routes.</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Annotations</em><div class="highlight-php-annotations"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Controller/BlogController.php</span>
<span class="k">namespace</span> <span class="nx">App\Controller</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Annotation\Route</span><span class="p">;</span>

<span class="sd">/**</span>
<span class="sd"> * @Route(&quot;/blog&quot;, requirements={&quot;_locale&quot;: &quot;en|es|fr&quot;}, name=&quot;blog_&quot;)</span>
<span class="sd"> */</span>
<span class="k">class</span> <span class="nc">BlogController</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @Route(&quot;/{_locale}&quot;, name=&quot;index&quot;)</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">index</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * @Route(&quot;/{_locale}/posts/{slug}&quot;, name=&quot;show&quot;)</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">show</span><span class="p">(</span><span class="nx">Post</span> <span class="nv">$post</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>YAML</em><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># config/routes/annotations.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">controllers</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">resource</span><span class="p p-Indicator">:</span> <span class="s">&#39;../../src/Controller/&#39;</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">annotation</span>
    <span class="c1"># this is added to the beginning of all imported route URLs</span>
    <span class="l l-Scalar l-Scalar-Plain">prefix</span><span class="p p-Indicator">:</span> <span class="s">&#39;/blog&#39;</span>
    <span class="c1"># this is added to the beginning of all imported route names</span>
    <span class="l l-Scalar l-Scalar-Plain">name_prefix</span><span class="p p-Indicator">:</span> <span class="s">&#39;blog_&#39;</span>
    <span class="c1"># these requirements are added to all imported routes</span>
    <span class="l l-Scalar l-Scalar-Plain">requirements</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">_locale</span><span class="p p-Indicator">:</span> <span class="s">&#39;en|es|fr&#39;</span>
    <span class="c1"># An imported route with an empty URL will become &quot;/blog/&quot;</span>
    <span class="c1"># Uncomment this option to make that URL &quot;/blog&quot; instead</span>
    <span class="c1"># trailing_slash_on_root: false</span>
    <span class="c1"># you can optionally exclude some files/subdirectories when loading annotations</span>
    <span class="c1"># exclude: &#39;../../src/Controller/{DebugEmailController}.php&#39;</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>XML</em><div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">&lt;!-- config/routes/annotations.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;routes</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/routing&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/routing</span>
<span class="s">        https://symfony.com/schema/routing/routing-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="c">&lt;!--</span>
<span class="c">        the &#39;prefix&#39; value is added to the beginning of all imported route URLs</span>
<span class="c">        the &#39;name-prefix&#39; value is added to the beginning of all imported route names</span>
<span class="c">        the &#39;exclude&#39; option defines the files or subdirectories ignored when loading annotations</span>
<span class="c">    --&gt;</span>
    <span class="nt">&lt;import</span> <span class="na">resource=</span><span class="s">&quot;../../src/Controller/&quot;</span>
        <span class="na">type=</span><span class="s">&quot;annotation&quot;</span>
        <span class="na">prefix=</span><span class="s">&quot;/blog&quot;</span>
        <span class="na">name-prefix=</span><span class="s">&quot;blog_&quot;</span>
        <span class="na">exclude=</span><span class="s">&quot;../../src/Controller/{DebugEmailController}.php&quot;</span><span class="nt">&gt;</span>
        <span class="c">&lt;!-- these requirements are added to all imported routes --&gt;</span>
        <span class="nt">&lt;requirement</span> <span class="na">key=</span><span class="s">&quot;_locale&quot;</span><span class="nt">&gt;</span>en|es|fr<span class="nt">&lt;/requirement&gt;</span>
    <span class="nt">&lt;/import&gt;</span>

    <span class="c">&lt;!-- An imported route with an empty URL will become &quot;/blog/&quot;</span>
<span class="c">         Uncomment this option to make that URL &quot;/blog&quot; instead --&gt;</span>
    <span class="nt">&lt;import</span> <span class="na">resource=</span><span class="s">&quot;../../src/Controller/&quot;</span> <span class="na">type=</span><span class="s">&quot;annotation&quot;</span>
            <span class="na">prefix=</span><span class="s">&quot;/blog&quot;</span>
            <span class="na">trailing-slash-on-root=</span><span class="s">&quot;false&quot;</span><span class="nt">&gt;</span>
            <span class="c">&lt;!-- ... --&gt;</span>
    <span class="nt">&lt;/import&gt;</span>
<span class="nt">&lt;/routes&gt;</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>PHP</em><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// config/routes/annotations.php</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Loader\Configurator\RoutingConfigurator</span><span class="p">;</span>

<span class="k">return</span> <span class="k">function</span> <span class="p">(</span><span class="nx">RoutingConfigurator</span> <span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// use the optional fifth argument of import() to exclude some files</span>
    <span class="c1">// or subdirectories when loading annotations</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">import</span><span class="p">(</span><span class="s1">&#39;../../src/Controller/&#39;</span><span class="p">,</span> <span class="s1">&#39;annotation&#39;</span><span class="p">)</span>
        <span class="c1">// this is added to the beginning of all imported route URLs</span>
        <span class="o">-&gt;</span><span class="na">prefix</span><span class="p">(</span><span class="s1">&#39;/blog&#39;</span><span class="p">)</span>
        <span class="c1">// An imported route with an empty URL will become &quot;/blog/&quot;</span>
        <span class="c1">// Pass FALSE as the second argument to make that URL &quot;/blog&quot; instead</span>
        <span class="c1">// -&gt;prefix(&#39;/blog&#39;, false)</span>
        <span class="c1">// this is added to the beginning of all imported route names</span>
        <span class="o">-&gt;</span><span class="na">namePrefix</span><span class="p">(</span><span class="s1">&#39;blog_&#39;</span><span class="p">)</span>
        <span class="c1">// these requirements are added to all imported routes</span>
        <span class="o">-&gt;</span><span class="na">requirements</span><span class="p">([</span><span class="s1">&#39;_locale&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;en|es|fr&#39;</span><span class="p">])</span>
    <span class="p">;</span>
<span class="p">};</span>
</pre></div>
</td></tr></table></div>
</li>
</ul>
</div>
<p>In this example, the route of the <code class="docutils literal"><span class="pre">index()</span></code> action will be called <code class="docutils literal"><span class="pre">blog_index</span></code>
and its URL will be <code class="docutils literal"><span class="pre">/blog/</span></code>. The route of the <code class="docutils literal"><span class="pre">show()</span></code> action will be called
<code class="docutils literal"><span class="pre">blog_show</span></code> and its URL will be <code class="docutils literal"><span class="pre">/blog/{_locale}/posts/{slug}</span></code>. Both routes
will also validate that the <code class="docutils literal"><span class="pre">_locale</span></code> parameter matches the regular expression
defined in the class annotation.</p>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last">Symfony can <a class="reference internal" href="routing/custom_route_loader.html"><em>import routes from different sources</em></a>
and you can even create your own route loader.</p>
</div>
</div>
<div class="section" id="getting-the-route-name-and-parameters">
<h2>Getting the Route Name and Parameters<a class="headerlink" href="#getting-the-route-name-and-parameters" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">Request</span></code> object created by Symfony stores all the route configuration
(such as the name and parameters) in the &#8220;request attributes&#8221;. You can get this
information in a controller via the <code class="docutils literal"><span class="pre">Request</span></code> object:</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="c1">// src/Controller/BlogController.php</span>
<span class="k">namespace</span> <span class="nx">App\Controller</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Bundle\FrameworkBundle\Controller\AbstractController</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\Request</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Annotation\Route</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">BlogController</span> <span class="k">extends</span> <span class="nx">AbstractController</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @Route(&quot;/blog&quot;, name=&quot;blog_list&quot;)</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">list</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>

        <span class="nv">$routeName</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">attributes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;_route&#39;</span><span class="p">);</span>
        <span class="nv">$routeParameters</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">attributes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;_route_params&#39;</span><span class="p">);</span>

        <span class="c1">// use this to get all the available attributes (not only routing ones):</span>
        <span class="nv">$allAttributes</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">attributes</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>You can get this information in services too injecting the <code class="docutils literal"><span class="pre">request_stack</span></code>
service to <a class="reference internal" href="service_container/request.html"><em>get the Request object in a service</em></a>.
In templates, use the <a class="reference internal" href="templates.html#twig-app-variable"><span>Twig global app variable</span></a> to get
the request and its attributes:</p>
<div class="highlight-twig"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">set</span> <span class="nv">route_name</span> <span class="o">=</span> <span class="nv">app.request.attributes.get</span><span class="o">(</span><span class="s1">&#39;_route&#39;</span><span class="o">)</span> <span class="cp">%}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">set</span> <span class="nv">route_parameters</span> <span class="o">=</span> <span class="nv">app.request.attributes.get</span><span class="o">(</span><span class="s1">&#39;_route_params&#39;</span><span class="o">)</span> <span class="cp">%}</span><span class="x"></span>

<span class="c">{# use this to get all the available attributes (not only routing ones) #}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">set</span> <span class="nv">all_attributes</span> <span class="o">=</span> <span class="nv">app.request.attributes.all</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="special-routes">
<h2>Special Routes<a class="headerlink" href="#special-routes" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>Symfony defines some special controllers to render templates and redirect to
other routes from the route configuration so you don&#8217;t have to create a
controller action.</p>
<div class="section" id="rendering-a-template-directly-from-a-route">
<h3>Rendering a Template Directly from a Route<a class="headerlink" href="#rendering-a-template-directly-from-a-route" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>Read the section about <a class="reference internal" href="templates.html#templates-render-from-route"><span>rendering a template from a route</span></a>
in the main article about Symfony templates.</p>
</div>
<div class="section" id="redirecting-to-urls-and-routes-directly-from-a-route">
<h3>Redirecting to URLs and Routes Directly from a Route<a class="headerlink" href="#redirecting-to-urls-and-routes-directly-from-a-route" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>Use the <code class="docutils literal"><span class="pre">RedirectController</span></code> to redirect to other routes and URLs:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># config/routes.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">doc_shortcut</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">path</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">/doc</span>
    <span class="l l-Scalar l-Scalar-Plain">controller</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Symfony\Bundle\FrameworkBundle\Controller\RedirectController</span>
    <span class="l l-Scalar l-Scalar-Plain">defaults</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">route</span><span class="p p-Indicator">:</span> <span class="s">&#39;doc_page&#39;</span>
        <span class="c1"># optionally you can define some arguments passed to the route</span>
        <span class="l l-Scalar l-Scalar-Plain">page</span><span class="p p-Indicator">:</span> <span class="s">&#39;index&#39;</span>
        <span class="l l-Scalar l-Scalar-Plain">version</span><span class="p p-Indicator">:</span> <span class="s">&#39;current&#39;</span>
        <span class="c1"># redirections are temporary by default (code 302) but you can make them permanent (code 301)</span>
        <span class="l l-Scalar l-Scalar-Plain">permanent</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
        <span class="c1"># add this to keep the original query string parameters when redirecting</span>
        <span class="l l-Scalar l-Scalar-Plain">keepQueryParams</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
        <span class="c1"># add this to keep the HTTP method when redirecting. The redirect status changes</span>
        <span class="c1"># * for temporary redirects, it uses the 307 status code instead of 302</span>
        <span class="c1"># * for permanent redirects, it uses the 308 status code instead of 301</span>
        <span class="l l-Scalar l-Scalar-Plain">keepRequestMethod</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>

<span class="l l-Scalar l-Scalar-Plain">legacy_doc</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">path</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">/legacy/doc</span>
    <span class="l l-Scalar l-Scalar-Plain">controller</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Symfony\Bundle\FrameworkBundle\Controller\RedirectController</span>
    <span class="l l-Scalar l-Scalar-Plain">defaults</span><span class="p p-Indicator">:</span>
        <span class="c1"># this value can be an absolute path or an absolute URL</span>
        <span class="l l-Scalar l-Scalar-Plain">path</span><span class="p p-Indicator">:</span> <span class="s">&#39;https://legacy.example.com/doc&#39;</span>
        <span class="l l-Scalar l-Scalar-Plain">permanent</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>XML</em><div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">&lt;!-- config/routes.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;routes</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/routing&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/routing</span>
<span class="s">        https://symfony.com/schema/routing/routing-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;doc_shortcut&quot;</span> <span class="na">path=</span><span class="s">&quot;/doc&quot;</span>
           <span class="na">controller=</span><span class="s">&quot;Symfony\Bundle\FrameworkBundle\Controller\RedirectController&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;default</span> <span class="na">key=</span><span class="s">&quot;route&quot;</span><span class="nt">&gt;</span>doc_page<span class="nt">&lt;/default&gt;</span>
        <span class="c">&lt;!-- optionally you can define some arguments passed to the route --&gt;</span>
        <span class="nt">&lt;default</span> <span class="na">key=</span><span class="s">&quot;page&quot;</span><span class="nt">&gt;</span>index<span class="nt">&lt;/default&gt;</span>
        <span class="nt">&lt;default</span> <span class="na">key=</span><span class="s">&quot;version&quot;</span><span class="nt">&gt;</span>current<span class="nt">&lt;/default&gt;</span>
        <span class="c">&lt;!-- redirections are temporary by default (code 302) but you can make them permanent (code 301)--&gt;</span>
        <span class="nt">&lt;default</span> <span class="na">key=</span><span class="s">&quot;permanent&quot;</span><span class="nt">&gt;</span>true<span class="nt">&lt;/default&gt;</span>
        <span class="c">&lt;!-- add this to keep the original query string parameters when redirecting --&gt;</span>
        <span class="nt">&lt;default</span> <span class="na">key=</span><span class="s">&quot;keepQueryParams&quot;</span><span class="nt">&gt;</span>true<span class="nt">&lt;/default&gt;</span>
        <span class="c">&lt;!-- add this to keep the HTTP method when redirecting. The redirect status changes:</span>
<span class="c">             * for temporary redirects, it uses the 307 status code instead of 302</span>
<span class="c">             * for permanent redirects, it uses the 308 status code instead of 301 --&gt;</span>
        <span class="nt">&lt;default</span> <span class="na">key=</span><span class="s">&quot;keepRequestMethod&quot;</span><span class="nt">&gt;</span>true<span class="nt">&lt;/default&gt;</span>
    <span class="nt">&lt;/route&gt;</span>

    <span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;legacy_doc&quot;</span> <span class="na">path=</span><span class="s">&quot;/legacy/doc&quot;</span>
           <span class="na">controller=</span><span class="s">&quot;Symfony\Bundle\FrameworkBundle\Controller\RedirectController&quot;</span><span class="nt">&gt;</span>
        <span class="c">&lt;!-- this value can be an absolute path or an absolute URL --&gt;</span>
        <span class="nt">&lt;default</span> <span class="na">key=</span><span class="s">&quot;path&quot;</span><span class="nt">&gt;</span>https://legacy.example.com/doc<span class="nt">&lt;/default&gt;</span>
        <span class="c">&lt;!-- redirections are temporary by default (code 302) but you can make them permanent (code 301)--&gt;</span>
        <span class="nt">&lt;default</span> <span class="na">key=</span><span class="s">&quot;permanent&quot;</span><span class="nt">&gt;</span>true<span class="nt">&lt;/default&gt;</span>
    <span class="nt">&lt;/route&gt;</span>
<span class="nt">&lt;/routes&gt;</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>PHP</em><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// config/routes.php</span>
<span class="k">use</span> <span class="nx">App\Controller\DefaultController</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Bundle\FrameworkBundle\Controller\RedirectController</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Loader\Configurator\RoutingConfigurator</span><span class="p">;</span>

<span class="k">return</span> <span class="k">function</span> <span class="p">(</span><span class="nx">RoutingConfigurator</span> <span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;doc_shortcut&#39;</span><span class="p">,</span> <span class="s1">&#39;/doc&#39;</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="na">controller</span><span class="p">(</span><span class="nx">RedirectController</span><span class="o">::</span><span class="na">class</span><span class="p">)</span>
         <span class="o">-&gt;</span><span class="na">defaults</span><span class="p">([</span>
            <span class="s1">&#39;route&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;doc_page&#39;</span><span class="p">,</span>
            <span class="c1">// optionally you can define some arguments passed to the route</span>
            <span class="s1">&#39;page&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;index&#39;</span><span class="p">,</span>
            <span class="s1">&#39;version&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;current&#39;</span><span class="p">,</span>
            <span class="c1">// redirections are temporary by default (code 302) but you can make them permanent (code 301)</span>
            <span class="s1">&#39;permanent&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
            <span class="c1">// add this to keep the original query string parameters when redirecting</span>
            <span class="s1">&#39;keepQueryParams&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
            <span class="c1">// add this to keep the HTTP method when redirecting. The redirect status changes:</span>
            <span class="c1">// * for temporary redirects, it uses the 307 status code instead of 302</span>
            <span class="c1">// * for permanent redirects, it uses the 308 status code instead of 301</span>
            <span class="s1">&#39;keepRequestMethod&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
        <span class="p">])</span>
    <span class="p">;</span>

    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;legacy_doc&#39;</span><span class="p">,</span> <span class="s1">&#39;/legacy/doc&#39;</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="na">controller</span><span class="p">(</span><span class="nx">RedirectController</span><span class="o">::</span><span class="na">class</span><span class="p">)</span>
         <span class="o">-&gt;</span><span class="na">defaults</span><span class="p">([</span>
            <span class="c1">// this value can be an absolute path or an absolute URL</span>
            <span class="s1">&#39;path&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;https://legacy.example.com/doc&#39;</span><span class="p">,</span>
            <span class="c1">// redirections are temporary by default (code 302) but you can make them permanent (code 301)</span>
            <span class="s1">&#39;permanent&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
        <span class="p">])</span>
    <span class="p">;</span>
<span class="p">};</span>
</pre></div>
</td></tr></table></div>
</li>
</ul>
</div>
<div class="admonition tip">
<p class="first admonition-title">ちなみに</p>
<p class="last">Symfony also provides some utilities to
<a class="reference internal" href="controller.html#controller-redirect"><span>redirect inside controllers</span></a></p>
</div>
<div class="section" id="redirecting-urls-with-trailing-slashes">
<span id="routing-trailing-slash-redirection"></span><h4>Redirecting URLs with Trailing Slashes<a class="headerlink" href="#redirecting-urls-with-trailing-slashes" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>Historically, URLs have followed the UNIX convention of adding trailing slashes
for directories (e.g. <code class="docutils literal"><span class="pre">https://example.com/foo/</span></code>) and removing them to refer
to files (<code class="docutils literal"><span class="pre">https://example.com/foo</span></code>). Although serving different contents for
both URLs is OK, nowadays it&#8217;s common to treat both URLs as the same URL and
redirect between them.</p>
<p>Symfony follows this logic to redirect between URLs with and without trailing
slashes (but only for <code class="docutils literal"><span class="pre">GET</span></code> and <code class="docutils literal"><span class="pre">HEAD</span></code> requests):</p>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="43%" />
<col width="46%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Route URL</th>
<th class="head">If the requested URL is <code class="docutils literal"><span class="pre">/foo</span></code></th>
<th class="head">If the requested URL is <code class="docutils literal"><span class="pre">/foo/</span></code></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">/foo</span></code></td>
<td>It matches (<code class="docutils literal"><span class="pre">200</span></code> status response)</td>
<td>It makes a <code class="docutils literal"><span class="pre">301</span></code> redirect to <code class="docutils literal"><span class="pre">/foo</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">/foo/</span></code></td>
<td>It makes a <code class="docutils literal"><span class="pre">301</span></code> redirect to <code class="docutils literal"><span class="pre">/foo/</span></code></td>
<td>It matches (<code class="docutils literal"><span class="pre">200</span></code> status response)</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section" id="sub-domain-routing">
<h2>Sub-Domain Routing<a class="headerlink" href="#sub-domain-routing" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>Routes can configure a <code class="docutils literal"><span class="pre">host</span></code> option to require that the HTTP host of the
incoming requests matches some specific value. In the following example, both
routes match the same path (<code class="docutils literal"><span class="pre">/</span></code>) but one of them only responds to a specific
host name:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Annotations</em><div class="highlight-php-annotations"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Controller/MainController.php</span>
<span class="k">namespace</span> <span class="nx">App\Controller</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Bundle\FrameworkBundle\Controller\AbstractController</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Annotation\Route</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">MainController</span> <span class="k">extends</span> <span class="nx">AbstractController</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @Route(&quot;/&quot;, name=&quot;mobile_homepage&quot;, host=&quot;m.example.com&quot;)</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">mobileHomepage</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * @Route(&quot;/&quot;, name=&quot;homepage&quot;)</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">homepage</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>YAML</em><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># config/routes.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">mobile_homepage</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">path</span><span class="p p-Indicator">:</span>       <span class="l l-Scalar l-Scalar-Plain">/</span>
    <span class="l l-Scalar l-Scalar-Plain">host</span><span class="p p-Indicator">:</span>       <span class="l l-Scalar l-Scalar-Plain">m.example.com</span>
    <span class="l l-Scalar l-Scalar-Plain">controller</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">App\Controller\MainController::mobileHomepage</span>

<span class="l l-Scalar l-Scalar-Plain">homepage</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">path</span><span class="p p-Indicator">:</span>       <span class="l l-Scalar l-Scalar-Plain">/</span>
    <span class="l l-Scalar l-Scalar-Plain">controller</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">App\Controller\MainController::homepage</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>XML</em><div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">&lt;!-- config/routes.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;routes</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/routing&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/routing</span>
<span class="s">        https://symfony.com/schema/routing/routing-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;mobile_homepage&quot;</span>
        <span class="na">path=</span><span class="s">&quot;/&quot;</span>
        <span class="na">host=</span><span class="s">&quot;m.example.com&quot;</span>
        <span class="na">controller=</span><span class="s">&quot;App\Controller\MainController::mobileHomepage&quot;</span><span class="nt">/&gt;</span>

    <span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;homepage&quot;</span> <span class="na">path=</span><span class="s">&quot;/&quot;</span> <span class="na">controller=</span><span class="s">&quot;App\Controller\MainController::homepage&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/routes&gt;</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>PHP</em><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// config/routes.php</span>
<span class="k">use</span> <span class="nx">App\Controller\MainController</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Loader\Configurator\RoutingConfigurator</span><span class="p">;</span>

<span class="k">return</span> <span class="k">function</span> <span class="p">(</span><span class="nx">RoutingConfigurator</span> <span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;mobile_homepage&#39;</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="na">controller</span><span class="p">([</span><span class="nx">MainController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;mobileHomepage&#39;</span><span class="p">])</span>
        <span class="o">-&gt;</span><span class="na">host</span><span class="p">(</span><span class="s1">&#39;m.example.com&#39;</span><span class="p">)</span>
    <span class="p">;</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;homepage&#39;</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="na">controller</span><span class="p">([</span><span class="nx">MainController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;homepage&#39;</span><span class="p">])</span>
    <span class="p">;</span>
<span class="p">};</span>
</pre></div>
</td></tr></table></div>
</li>
</ul>
</div>
<p>The value of the <code class="docutils literal"><span class="pre">host</span></code> option can include parameters (which is useful in
multi-tenant applications) and these parameters can be validated too with
<code class="docutils literal"><span class="pre">requirements</span></code>:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Annotations</em><div class="highlight-php-annotations"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Controller/MainController.php</span>
<span class="k">namespace</span> <span class="nx">App\Controller</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Bundle\FrameworkBundle\Controller\AbstractController</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Annotation\Route</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">MainController</span> <span class="k">extends</span> <span class="nx">AbstractController</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @Route(</span>
<span class="sd">     *     &quot;/&quot;,</span>
<span class="sd">     *     name=&quot;mobile_homepage&quot;,</span>
<span class="sd">     *     host=&quot;{subdomain}.example.com&quot;,</span>
<span class="sd">     *     defaults={&quot;subdomain&quot;=&quot;m&quot;},</span>
<span class="sd">     *     requirements={&quot;subdomain&quot;=&quot;m|mobile&quot;}</span>
<span class="sd">     * )</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">mobileHomepage</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * @Route(&quot;/&quot;, name=&quot;homepage&quot;)</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">homepage</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>YAML</em><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># config/routes.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">mobile_homepage</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">path</span><span class="p p-Indicator">:</span>       <span class="l l-Scalar l-Scalar-Plain">/</span>
    <span class="l l-Scalar l-Scalar-Plain">host</span><span class="p p-Indicator">:</span>       <span class="s">&quot;{subdomain}.example.com&quot;</span>
    <span class="l l-Scalar l-Scalar-Plain">controller</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">App\Controller\MainController::mobileHomepage</span>
    <span class="l l-Scalar l-Scalar-Plain">defaults</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">subdomain</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">m</span>
    <span class="l l-Scalar l-Scalar-Plain">requirements</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">subdomain</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">m|mobile</span>

<span class="l l-Scalar l-Scalar-Plain">homepage</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">path</span><span class="p p-Indicator">:</span>       <span class="l l-Scalar l-Scalar-Plain">/</span>
    <span class="l l-Scalar l-Scalar-Plain">controller</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">App\Controller\MainController::homepage</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>XML</em><div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">&lt;!-- config/routes.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;routes</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/routing&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/routing</span>
<span class="s">        https://symfony.com/schema/routing/routing-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;mobile_homepage&quot;</span>
        <span class="na">path=</span><span class="s">&quot;/&quot;</span>
        <span class="na">host=</span><span class="s">&quot;{subdomain}.example.com&quot;</span>
        <span class="na">controller=</span><span class="s">&quot;App\Controller\MainController::mobileHomepage&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;default</span> <span class="na">key=</span><span class="s">&quot;subdomain&quot;</span><span class="nt">&gt;</span>m<span class="nt">&lt;/default&gt;</span>
        <span class="nt">&lt;requirement</span> <span class="na">key=</span><span class="s">&quot;subdomain&quot;</span><span class="nt">&gt;</span>m|mobile<span class="nt">&lt;/requirement&gt;</span>
    <span class="nt">&lt;/route&gt;</span>

    <span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;homepage&quot;</span> <span class="na">path=</span><span class="s">&quot;/&quot;</span> <span class="na">controller=</span><span class="s">&quot;App\Controller\MainController::homepage&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/routes&gt;</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>PHP</em><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// config/routes.php</span>
<span class="k">use</span> <span class="nx">App\Controller\MainController</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Loader\Configurator\RoutingConfigurator</span><span class="p">;</span>

<span class="k">return</span> <span class="k">function</span> <span class="p">(</span><span class="nx">RoutingConfigurator</span> <span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;mobile_homepage&#39;</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="na">controller</span><span class="p">([</span><span class="nx">MainController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;mobileHomepage&#39;</span><span class="p">])</span>
        <span class="o">-&gt;</span><span class="na">host</span><span class="p">(</span><span class="s1">&#39;{subdomain}.example.com&#39;</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="na">defaults</span><span class="p">([</span>
            <span class="s1">&#39;subdomain&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;m&#39;</span><span class="p">,</span>
        <span class="p">])</span>
        <span class="o">-&gt;</span><span class="na">requirements</span><span class="p">([</span>
            <span class="s1">&#39;subdomain&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;m|mobile&#39;</span><span class="p">,</span>
        <span class="p">])</span>
    <span class="p">;</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;homepage&#39;</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="na">controller</span><span class="p">([</span><span class="nx">MainController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;homepage&#39;</span><span class="p">])</span>
    <span class="p">;</span>
<span class="p">};</span>
</pre></div>
</td></tr></table></div>
</li>
</ul>
</div>
<p>In the above example, the <code class="docutils literal"><span class="pre">subdomain</span></code> parameter defines a default value because
otherwise you need to include a domain value each time you generate a URL using
these routes.</p>
<div class="admonition tip">
<p class="first admonition-title">ちなみに</p>
<p class="last">You can also set the <code class="docutils literal"><span class="pre">host</span></code> option when <a class="reference internal" href="#routing-route-groups"><span>importing routes</span></a>
to make all of them require that host name.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p>When using sub-domain routing, you must set the <code class="docutils literal"><span class="pre">Host</span></code> HTTP headers in
<a class="reference internal" href="testing.html"><em>functional tests</em></a> or routes won&#8217;t match:</p>
<div class="last highlight-php"><div class="highlight"><pre><span></span><span class="nv">$crawler</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">(</span>
    <span class="s1">&#39;GET&#39;</span><span class="p">,</span>
    <span class="s1">&#39;/&#39;</span><span class="p">,</span>
    <span class="p">[],</span>
    <span class="p">[],</span>
    <span class="p">[</span><span class="s1">&#39;HTTP_HOST&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;m.example.com&#39;</span><span class="p">]</span>
    <span class="c1">// or get the value from some container parameter:</span>
    <span class="c1">// [&#39;HTTP_HOST&#39; =&gt; &#39;m.&#39; . $client-&gt;getContainer()-&gt;getParameter(&#39;domain&#39;)]</span>
<span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="localized-routes-i18n">
<span id="i18n-routing"></span><h2>Localized Routes (i18n)<a class="headerlink" href="#localized-routes-i18n" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>If your application is translated into multiple languages, each route can define
a different URL per each <a class="reference internal" href="translation/locale.html"><em>translation locale</em></a>. This
avoids the need for duplicating routes, which also reduces the potential bugs:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Annotations</em><div class="highlight-php-annotations"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Controller/CompanyController.php</span>
<span class="k">namespace</span> <span class="nx">App\Controller</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Bundle\FrameworkBundle\Controller\AbstractController</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Annotation\Route</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">CompanyController</span> <span class="k">extends</span> <span class="nx">AbstractController</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @Route({</span>
<span class="sd">     *     &quot;en&quot;: &quot;/about-us&quot;,</span>
<span class="sd">     *     &quot;nl&quot;: &quot;/over-ons&quot;</span>
<span class="sd">     * }, name=&quot;about_us&quot;)</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">about</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>YAML</em><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># config/routes.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">about_us</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">path</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">en</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">/about-us</span>
        <span class="l l-Scalar l-Scalar-Plain">nl</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">/over-ons</span>
    <span class="l l-Scalar l-Scalar-Plain">controller</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">App\Controller\CompanyController::about</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>XML</em><div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">&lt;!-- config/routes.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;routes</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/routing&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/routing</span>
<span class="s">        https://symfony.com/schema/routing/routing-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;about_us&quot;</span> <span class="na">controller=</span><span class="s">&quot;App\Controller\CompanyController::about&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;path</span> <span class="na">locale=</span><span class="s">&quot;en&quot;</span><span class="nt">&gt;</span>/about-us<span class="nt">&lt;/path&gt;</span>
        <span class="nt">&lt;path</span> <span class="na">locale=</span><span class="s">&quot;nl&quot;</span><span class="nt">&gt;</span>/over-ons<span class="nt">&lt;/path&gt;</span>
    <span class="nt">&lt;/route&gt;</span>
<span class="nt">&lt;/routes&gt;</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>PHP</em><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// config/routes.php</span>
<span class="k">use</span> <span class="nx">App\Controller\CompanyController</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Loader\Configurator\RoutingConfigurator</span><span class="p">;</span>

<span class="k">return</span> <span class="k">function</span> <span class="p">(</span><span class="nx">RoutingConfigurator</span> <span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;about_us&#39;</span><span class="p">,</span> <span class="p">[</span>
        <span class="s1">&#39;en&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;/about-us&#39;</span><span class="p">,</span>
        <span class="s1">&#39;nl&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;/over-ons&#39;</span><span class="p">,</span>
    <span class="p">])</span>
        <span class="o">-&gt;</span><span class="na">controller</span><span class="p">([</span><span class="nx">CompanyController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;about&#39;</span><span class="p">])</span>
    <span class="p">;</span>
<span class="p">};</span>
</pre></div>
</td></tr></table></div>
</li>
</ul>
</div>
<p>When a localized route is matched, Symfony uses the same locale automatically
during the entire request.</p>
<div class="admonition tip">
<p class="first admonition-title">ちなみに</p>
<p class="last">When the application uses full &#8220;language + territory&#8221; locales (e.g. <code class="docutils literal"><span class="pre">fr_FR</span></code>,
<code class="docutils literal"><span class="pre">fr_BE</span></code>), if the URLs are the same in all related locales, routes can use
only the language part (e.g. <code class="docutils literal"><span class="pre">fr</span></code>) to avoid repeating the same URLs.</p>
</div>
<p>A common requirement for internationalized applications is to prefix all routes
with a locale. This can be done by defining a different prefix for each locale
(and setting an empty prefix for your default locale if you prefer it):</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># config/routes/annotations.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">controllers</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">resource</span><span class="p p-Indicator">:</span> <span class="s">&#39;../../src/Controller/&#39;</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">annotation</span>
    <span class="l l-Scalar l-Scalar-Plain">prefix</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">en</span><span class="p p-Indicator">:</span> <span class="s">&#39;&#39;</span> <span class="c1"># don&#39;t prefix URLs for English, the default locale</span>
        <span class="l l-Scalar l-Scalar-Plain">nl</span><span class="p p-Indicator">:</span> <span class="s">&#39;/nl&#39;</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>XML</em><div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">&lt;!-- config/routes/annotations.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;routes</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/routing&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/routing</span>
<span class="s">        https://symfony.com/schema/routing/routing-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;import</span> <span class="na">resource=</span><span class="s">&quot;../../src/Controller/&quot;</span> <span class="na">type=</span><span class="s">&quot;annotation&quot;</span><span class="nt">&gt;</span>
        <span class="c">&lt;!-- don&#39;t prefix URLs for English, the default locale --&gt;</span>
        <span class="nt">&lt;prefix</span> <span class="na">locale=</span><span class="s">&quot;en&quot;</span><span class="nt">&gt;&lt;/prefix&gt;</span>
        <span class="nt">&lt;prefix</span> <span class="na">locale=</span><span class="s">&quot;nl&quot;</span><span class="nt">&gt;</span>/nl<span class="nt">&lt;/prefix&gt;</span>
    <span class="nt">&lt;/import&gt;</span>
<span class="nt">&lt;/routes&gt;</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>PHP</em><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// config/routes/annotations.php</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Loader\Configurator\RoutingConfigurator</span><span class="p">;</span>

<span class="k">return</span> <span class="k">function</span> <span class="p">(</span><span class="nx">RoutingConfigurator</span> <span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">import</span><span class="p">(</span><span class="s1">&#39;../../src/Controller/&#39;</span><span class="p">,</span> <span class="s1">&#39;annotation&#39;</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="na">prefix</span><span class="p">([</span>
            <span class="c1">// don&#39;t prefix URLs for English, the default locale</span>
            <span class="s1">&#39;en&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;nl&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;/nl&#39;</span>
        <span class="p">])</span>
    <span class="p">;</span>
<span class="p">};</span>
</pre></div>
</td></tr></table></div>
</li>
</ul>
</div>
</div>
<div class="section" id="stateless-routes">
<span id="stateless-routing"></span><h2>Stateless Routes<a class="headerlink" href="#stateless-routes" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified">バージョン 5.1 で追加: </span>The <code class="docutils literal"><span class="pre">stateless</span></code> option was introduced in Symfony 5.1.</p>
</div>
<p>Sometimes, when an HTTP response should be cached, it is important to ensure
that can happen. However, whenever session is started during a request, Symfony
turns the response into a private non-cacheable response.</p>
<p>For details, see <a class="reference internal" href="http_cache.html"><em>HTTP Cache</em></a>.</p>
<p>Routes can configure a <code class="docutils literal"><span class="pre">stateless</span></code> boolean option in order to declare that the
session shouldn&#8217;t be used when matching a request:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Annotations</em><div class="highlight-php-annotations"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Controller/MainController.php</span>
<span class="k">namespace</span> <span class="nx">App\Controller</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Bundle\FrameworkBundle\Controller\AbstractController</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Annotation\Route</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">MainController</span> <span class="k">extends</span> <span class="nx">AbstractController</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @Route(&quot;/&quot;, name=&quot;homepage&quot;, stateless=true)</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">homepage</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>YAML</em><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># config/routes.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">homepage</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">controller</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">App\Controller\MainController::homepage</span>
    <span class="l l-Scalar l-Scalar-Plain">path</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">/</span>
    <span class="l l-Scalar l-Scalar-Plain">stateless</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>XML</em><div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">&lt;!-- config/routes.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;routes</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/routing&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/routing</span>
<span class="s">        https://symfony.com/schema/routing/routing-1.0.xsd&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;homepage&quot;</span> <span class="na">controller=</span><span class="s">&quot;App\Controller\MainController::homepage&quot;</span> <span class="na">path=</span><span class="s">&quot;/&quot;</span> <span class="na">stateless=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/routes&gt;</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>PHP</em><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// config/routes.php</span>
<span class="k">use</span> <span class="nx">App\Controller\MainController</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Bundle\FrameworkBundle\Routing\Loader\Configurator\RoutingConfigurator</span><span class="p">;</span>

<span class="k">return</span> <span class="k">function</span> <span class="p">(</span><span class="nx">RoutingConfigurator</span> <span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;homepage&#39;</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="na">controller</span><span class="p">([</span><span class="nx">MainController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;homepage&#39;</span><span class="p">])</span>
        <span class="o">-&gt;</span><span class="na">stateless</span><span class="p">()</span>
    <span class="p">;</span>
<span class="p">};</span>
</pre></div>
</td></tr></table></div>
</li>
</ul>
</div>
<p>Now, if the session is used, the application will report it based on your
<code class="docutils literal"><span class="pre">kernel.debug</span></code> parameter:
* <code class="docutils literal"><span class="pre">enabled</span></code>: will throw an <code class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpKernel/Exception/UnexpectedSessionUsageException.html" title="Symfony\Component\HttpKernel\Exception\UnexpectedSessionUsageException"><span class="pre">UnexpectedSessionUsageException</span></a></code> exception
* <code class="docutils literal"><span class="pre">disabled</span></code>: will log a warning</p>
<p>It well help you understanding and hopefully fixing unexpected behavior in your application.</p>
</div>
<div class="section" id="generating-urls">
<span id="routing-generating-urls"></span><h2>Generating URLs<a class="headerlink" href="#generating-urls" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>Routing systems are bidirectional: 1) they associate URLs with controllers (as
explained in the previous sections); 2) they generate URLs for a given route.
Generating URLs from routes allows you to not write the <code class="docutils literal"><span class="pre">&lt;a</span> <span class="pre">href=&quot;...&quot;&gt;</span></code>
values manually in your HTML templates. Also, if the URL of some route changes,
you only have to update the route configuration and all links will be updated.</p>
<p>To generate a URL, you need to specify the name of the route (e.g.
<code class="docutils literal"><span class="pre">blog_show</span></code>) and the values of the parameters defined by the route (e.g.
<code class="docutils literal"><span class="pre">slug</span> <span class="pre">=</span> <span class="pre">my-blog-post</span></code>).</p>
<p>For that reason each route has an internal name that must be unique in the
application. If you don&#8217;t set the route name explicitly with the <code class="docutils literal"><span class="pre">name</span></code>
option, Symfony generates an automatic name based on the controller and action.</p>
<div class="section" id="generating-urls-in-controllers">
<h3>Generating URLs in Controllers<a class="headerlink" href="#generating-urls-in-controllers" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>If your controller extends from the <a class="reference internal" href="controller.html#the-base-controller-class-services"><span>AbstractController</span></a>,
use the <code class="docutils literal"><span class="pre">generateUrl()</span></code> helper:</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="c1">// src/Controller/BlogController.php</span>
<span class="k">namespace</span> <span class="nx">App\Controller</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Bundle\FrameworkBundle\Controller\AbstractController</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Annotation\Route</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Generator\UrlGeneratorInterface</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">BlogController</span> <span class="k">extends</span> <span class="nx">AbstractController</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @Route(&quot;/blog&quot;, name=&quot;blog_list&quot;)</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">list</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>

        <span class="c1">// generate a URL with no route arguments</span>
        <span class="nv">$signUpPage</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">generateUrl</span><span class="p">(</span><span class="s1">&#39;sign_up&#39;</span><span class="p">);</span>

        <span class="c1">// generate a URL with route arguments</span>
        <span class="nv">$userProfilePage</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">generateUrl</span><span class="p">(</span><span class="s1">&#39;user_profile&#39;</span><span class="p">,</span> <span class="p">[</span>
            <span class="s1">&#39;username&#39;</span> <span class="o">=&gt;</span> <span class="nv">$user</span><span class="o">-&gt;</span><span class="na">getUsername</span><span class="p">(),</span>
        <span class="p">]);</span>

        <span class="c1">// generated URLs are &quot;absolute paths&quot; by default. Pass a third optional</span>
        <span class="c1">// argument to generate different URLs (e.g. an &quot;absolute URL&quot;)</span>
        <span class="nv">$signUpPage</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">generateUrl</span><span class="p">(</span><span class="s1">&#39;sign_up&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="nx">UrlGeneratorInterface</span><span class="o">::</span><span class="na">ABSOLUTE_URL</span><span class="p">);</span>

        <span class="c1">// when a route is localized, Symfony uses by default the current request locale</span>
        <span class="c1">// pass a different &#39;_locale&#39; value if you want to set the locale explicitly</span>
        <span class="nv">$signUpPageInDutch</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">generateUrl</span><span class="p">(</span><span class="s1">&#39;sign_up&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;_locale&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;nl&#39;</span><span class="p">]);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p>If you pass to the <code class="docutils literal"><span class="pre">generateUrl()</span></code> method some parameters that are not
part of the route definition, they are included in the generated URL as a
query string::</p>
<div class="last highlight-php"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">generateUrl</span><span class="p">(</span><span class="s1">&#39;blog&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;page&#39;</span> <span class="o">=&gt;</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;category&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Symfony&#39;</span><span class="p">]);</span>
<span class="c1">// the &#39;blog&#39; route only defines the &#39;page&#39; parameter; the generated URL is:</span>
<span class="c1">// /blog/2?category=Symfony</span>
</pre></div>
</div>
</div>
<p>If your controller does not extend from <code class="docutils literal"><span class="pre">AbstractController</span></code>, you&#8217;ll need to
<a class="reference internal" href="controller.html#controller-accessing-services"><span>fetch services in your controller</span></a> and
follow the instructions of the next section.</p>
</div>
<div class="section" id="generating-urls-in-services">
<span id="routing-generating-urls-in-services"></span><h3>Generating URLs in Services<a class="headerlink" href="#generating-urls-in-services" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>Inject the <code class="docutils literal"><span class="pre">router</span></code> Symfony service into your own services and use its
<code class="docutils literal"><span class="pre">generate()</span></code> method. When using <a class="reference internal" href="service_container/autowiring.html"><em>service autowiring</em></a>
you only need to add an argument in the service constructor and type-hint it with
the <code class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/Routing/Generator/UrlGeneratorInterface.html" title="Symfony\Component\Routing\Generator\UrlGeneratorInterface"><span class="pre">UrlGeneratorInterface</span></a></code> class:</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="c1">// src/Service/SomeService.php</span>
<span class="k">namespace</span> <span class="nx">App\Service</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Generator\UrlGeneratorInterface</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">SomeService</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="nv">$router</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nx">UrlGeneratorInterface</span> <span class="nv">$router</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">router</span> <span class="o">=</span> <span class="nv">$router</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">someMethod</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>

        <span class="c1">// generate a URL with no route arguments</span>
        <span class="nv">$signUpPage</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">router</span><span class="o">-&gt;</span><span class="na">generate</span><span class="p">(</span><span class="s1">&#39;sign_up&#39;</span><span class="p">);</span>

        <span class="c1">// generate a URL with route arguments</span>
        <span class="nv">$userProfilePage</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">router</span><span class="o">-&gt;</span><span class="na">generate</span><span class="p">(</span><span class="s1">&#39;user_profile&#39;</span><span class="p">,</span> <span class="p">[</span>
            <span class="s1">&#39;username&#39;</span> <span class="o">=&gt;</span> <span class="nv">$user</span><span class="o">-&gt;</span><span class="na">getUsername</span><span class="p">(),</span>
        <span class="p">]);</span>

        <span class="c1">// generated URLs are &quot;absolute paths&quot; by default. Pass a third optional</span>
        <span class="c1">// argument to generate different URLs (e.g. an &quot;absolute URL&quot;)</span>
        <span class="nv">$signUpPage</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">router</span><span class="o">-&gt;</span><span class="na">generate</span><span class="p">(</span><span class="s1">&#39;sign_up&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="nx">UrlGeneratorInterface</span><span class="o">::</span><span class="na">ABSOLUTE_URL</span><span class="p">);</span>

        <span class="c1">// when a route is localized, Symfony uses by default the current request locale</span>
        <span class="c1">// pass a different &#39;_locale&#39; value if you want to set the locale explicitly</span>
        <span class="nv">$signUpPageInDutch</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">router</span><span class="o">-&gt;</span><span class="na">generate</span><span class="p">(</span><span class="s1">&#39;sign_up&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;_locale&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;nl&#39;</span><span class="p">]);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="generating-urls-in-templates">
<h3>Generating URLs in Templates<a class="headerlink" href="#generating-urls-in-templates" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>Read the section about <a class="reference internal" href="templates.html#templates-link-to-pages"><span>creating links between pages</span></a>
in the main article about Symfony templates.</p>
</div>
<div class="section" id="generating-urls-in-javascript">
<h3>Generating URLs in JavaScript<a class="headerlink" href="#generating-urls-in-javascript" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>If your JavaScript code is included in a Twig template, you can use the
<code class="docutils literal"><span class="pre">path()</span></code> and <code class="docutils literal"><span class="pre">url()</span></code> Twig functions to generate the URLs and store them in
JavaScript variables. The <code class="docutils literal"><span class="pre">escape()</span></code> function is needed to escape any
non-JavaScript-safe values:</p>
<div class="highlight-html+twig"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="kr">const</span> <span class="nx">route</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="cp">{{</span> <span class="nv">path</span><span class="o">(</span><span class="s1">&#39;blog_show&#39;</span><span class="o">,</span> <span class="o">{</span><span class="nv">slug</span><span class="o">:</span> <span class="s1">&#39;my-blog-post&#39;</span><span class="o">})|</span><span class="nf">escape</span><span class="o">(</span><span class="s1">&#39;js&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</td></tr></table></div>
<p>If you need to generate URLs dynamically or if you are using pure JavaScript
code, this solution doesn&#8217;t work. In those cases, consider using the
<a class="reference external" href="https://github.com/FriendsOfSymfony/FOSJsRoutingBundle">FOSJsRoutingBundle</a>.</p>
</div>
<div class="section" id="generating-urls-in-commands">
<h3>Generating URLs in Commands<a class="headerlink" href="#generating-urls-in-commands" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>Generating URLs in commands works the same as
<a class="reference internal" href="#routing-generating-urls-in-services"><span>generating URLs in services</span></a>. The
only difference is that commands are not executed in the HTTP context, so they
don&#8217;t have access to HTTP requests. In practice, this means that if you generate
absolute URLs, you&#8217;ll get <code class="docutils literal"><span class="pre">http://localhost/</span></code> as the host name instead of your
real host name.</p>
<p>The solution is to configure the &#8220;request context&#8221; used by commands when they
generate URLs. This context can be configured globally for all commands:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># config/services.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">parameters</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">router.request_context.host</span><span class="p p-Indicator">:</span> <span class="s">&#39;example.org&#39;</span>
    <span class="l l-Scalar l-Scalar-Plain">router.request_context.base_url</span><span class="p p-Indicator">:</span> <span class="s">&#39;my/path&#39;</span>
    <span class="l l-Scalar l-Scalar-Plain">asset.request_context.base_path</span><span class="p p-Indicator">:</span> <span class="s">&#39;%router.request_context.base_url%&#39;</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>XML</em><div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">&lt;!-- config/services.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;container</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/dic/services&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/dic/services</span>
<span class="s">        https://symfony.com/schema/dic/services/services-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;parameters&gt;</span>
        <span class="nt">&lt;parameter</span> <span class="na">key=</span><span class="s">&quot;router.request_context.host&quot;</span><span class="nt">&gt;</span>example.org<span class="nt">&lt;/parameter&gt;</span>
        <span class="nt">&lt;parameter</span> <span class="na">key=</span><span class="s">&quot;router.request_context.base_url&quot;</span><span class="nt">&gt;</span>my/path<span class="nt">&lt;/parameter&gt;</span>
        <span class="nt">&lt;parameter</span> <span class="na">key=</span><span class="s">&quot;asset.request_context.base_path&quot;</span><span class="nt">&gt;</span>%router.request_context.base_url%<span class="nt">&lt;/parameter&gt;</span>
    <span class="nt">&lt;/parameters&gt;</span>

<span class="nt">&lt;/container&gt;</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>PHP</em><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// config/services.php</span>
<span class="nv">$container</span><span class="o">-&gt;</span><span class="na">setParameter</span><span class="p">(</span><span class="s1">&#39;router.request_context.host&#39;</span><span class="p">,</span> <span class="s1">&#39;example.org&#39;</span><span class="p">);</span>
<span class="nv">$container</span><span class="o">-&gt;</span><span class="na">setParameter</span><span class="p">(</span><span class="s1">&#39;router.request_context.base_url&#39;</span><span class="p">,</span> <span class="s1">&#39;my/path&#39;</span><span class="p">);</span>
<span class="nv">$container</span><span class="o">-&gt;</span><span class="na">setParameter</span><span class="p">(</span><span class="s1">&#39;asset.request_context.base_path&#39;</span><span class="p">,</span> <span class="nv">$container</span><span class="o">-&gt;</span><span class="na">getParameter</span><span class="p">(</span><span class="s1">&#39;router.request_context.base_url&#39;</span><span class="p">));</span>
</pre></div>
</td></tr></table></div>
</li>
</ul>
</div>
<p>This information can be configured per command too:</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="c1">// src/Command/SomeCommand.php</span>
<span class="k">namespace</span> <span class="nx">App\Command</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Component\Console\Command\Command</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Console\Input\InputInterface</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Console\Output\OutputInterface</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Generator\UrlGeneratorInterface</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\RouterInterface</span><span class="p">;</span>
<span class="c1">// ...</span>

<span class="k">class</span> <span class="nc">SomeCommand</span> <span class="k">extends</span> <span class="nx">Command</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="nv">$router</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nx">RouterInterface</span> <span class="nv">$router</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">parent</span><span class="o">::</span><span class="na">__construct</span><span class="p">();</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">router</span> <span class="o">=</span> <span class="nv">$router</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">protected</span> <span class="k">function</span> <span class="nf">execute</span><span class="p">(</span><span class="nx">InputInterface</span> <span class="nv">$input</span><span class="p">,</span> <span class="nx">OutputInterface</span> <span class="nv">$output</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// these values override any global configuration</span>
        <span class="nv">$context</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">router</span><span class="o">-&gt;</span><span class="na">getContext</span><span class="p">();</span>
        <span class="nv">$context</span><span class="o">-&gt;</span><span class="na">setHost</span><span class="p">(</span><span class="s1">&#39;example.com&#39;</span><span class="p">);</span>
        <span class="nv">$context</span><span class="o">-&gt;</span><span class="na">setBaseUrl</span><span class="p">(</span><span class="s1">&#39;my/path&#39;</span><span class="p">);</span>

        <span class="c1">// generate a URL with no route arguments</span>
        <span class="nv">$signUpPage</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">router</span><span class="o">-&gt;</span><span class="na">generate</span><span class="p">(</span><span class="s1">&#39;sign_up&#39;</span><span class="p">);</span>

        <span class="c1">// generate a URL with route arguments</span>
        <span class="nv">$userProfilePage</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">router</span><span class="o">-&gt;</span><span class="na">generate</span><span class="p">(</span><span class="s1">&#39;user_profile&#39;</span><span class="p">,</span> <span class="p">[</span>
            <span class="s1">&#39;username&#39;</span> <span class="o">=&gt;</span> <span class="nv">$user</span><span class="o">-&gt;</span><span class="na">getUsername</span><span class="p">(),</span>
        <span class="p">]);</span>

        <span class="c1">// generated URLs are &quot;absolute paths&quot; by default. Pass a third optional</span>
        <span class="c1">// argument to generate different URLs (e.g. an &quot;absolute URL&quot;)</span>
        <span class="nv">$signUpPage</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">router</span><span class="o">-&gt;</span><span class="na">generate</span><span class="p">(</span><span class="s1">&#39;sign_up&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="nx">UrlGeneratorInterface</span><span class="o">::</span><span class="na">ABSOLUTE_URL</span><span class="p">);</span>

        <span class="c1">// when a route is localized, Symfony uses by default the current request locale</span>
        <span class="c1">// pass a different &#39;_locale&#39; value if you want to set the locale explicitly</span>
        <span class="nv">$signUpPageInDutch</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">router</span><span class="o">-&gt;</span><span class="na">generate</span><span class="p">(</span><span class="s1">&#39;sign_up&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;_locale&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;nl&#39;</span><span class="p">]);</span>

        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="checking-if-a-route-exists">
<h3>Checking if a Route Exists<a class="headerlink" href="#checking-if-a-route-exists" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>In highly dynamic applications, it may be necessary to check whether a route
exists before using it to generate a URL. In those cases, don&#8217;t use the
<code class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/Routing/Router.html#method_getRouteCollection" title="Symfony\Component\Routing\Router::getRouteCollection()"><span class="pre">getRouteCollection()</span></a></code> method because
that regenerates the routing cache and slows down the application.</p>
<p>Instead, try to generate the URL and catch the
<code class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/Routing/Exception/RouteNotFoundException.html" title="Symfony\Component\Routing\Exception\RouteNotFoundException"><span class="pre">RouteNotFoundException</span></a></code> thrown
when the route doesn&#8217;t exist:</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Symfony\Component\Routing\Exception\RouteNotFoundException</span><span class="p">;</span>

<span class="c1">// ...</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$url</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">router</span><span class="o">-&gt;</span><span class="na">generate</span><span class="p">(</span><span class="nv">$routeName</span><span class="p">,</span> <span class="nv">$routeParameters</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">RouteNotFoundException</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// the route is not defined...</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="forcing-https-on-generated-urls">
<span id="routing-force-https"></span><h3>Forcing HTTPS on Generated URLs<a class="headerlink" href="#forcing-https-on-generated-urls" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>By default, generated URLs use the same HTTP scheme as the current request.
In console commands, where there is no HTTP request, URLs use <code class="docutils literal"><span class="pre">http</span></code> by
default. You can change this per command (via the router&#8217;s <code class="docutils literal"><span class="pre">getContext()</span></code>
method) or globally with these configuration parameters:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># config/services.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">parameters</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">router.request_context.scheme</span><span class="p p-Indicator">:</span> <span class="s">&#39;https&#39;</span>
    <span class="l l-Scalar l-Scalar-Plain">asset.request_context.secure</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>XML</em><div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">&lt;!-- config/services.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;container</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/dic/services&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/dic/services</span>
<span class="s">        https://symfony.com/schema/dic/services/services-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;parameters&gt;</span>
        <span class="nt">&lt;parameter</span> <span class="na">key=</span><span class="s">&quot;router.request_context.scheme&quot;</span><span class="nt">&gt;</span>https<span class="nt">&lt;/parameter&gt;</span>
        <span class="nt">&lt;parameter</span> <span class="na">key=</span><span class="s">&quot;asset.request_context.secure&quot;</span><span class="nt">&gt;</span>true<span class="nt">&lt;/parameter&gt;</span>
    <span class="nt">&lt;/parameters&gt;</span>

<span class="nt">&lt;/container&gt;</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>PHP</em><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// config/services.php</span>
<span class="nv">$container</span><span class="o">-&gt;</span><span class="na">setParameter</span><span class="p">(</span><span class="s1">&#39;router.request_context.scheme&#39;</span><span class="p">,</span> <span class="s1">&#39;https&#39;</span><span class="p">);</span>
<span class="nv">$container</span><span class="o">-&gt;</span><span class="na">setParameter</span><span class="p">(</span><span class="s1">&#39;asset.request_context.secure&#39;</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>
</pre></div>
</td></tr></table></div>
</li>
</ul>
</div>
<p>Outside of console commands, use the <code class="docutils literal"><span class="pre">schemes</span></code> option to define the scheme of
each route explicitly:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Annotations</em><div class="highlight-php-annotations"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Controller/SecurityController.php</span>
<span class="k">namespace</span> <span class="nx">App\Controller</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Bundle\FrameworkBundle\Controller\AbstractController</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Annotation\Route</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">SecurityController</span> <span class="k">extends</span> <span class="nx">AbstractController</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @Route(&quot;/login&quot;, name=&quot;login&quot;, schemes={&quot;https&quot;})</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">login</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>YAML</em><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># config/routes.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">login</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">path</span><span class="p p-Indicator">:</span>       <span class="l l-Scalar l-Scalar-Plain">/login</span>
    <span class="l l-Scalar l-Scalar-Plain">controller</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">App\Controller\SecurityController::login</span>
    <span class="l l-Scalar l-Scalar-Plain">schemes</span><span class="p p-Indicator">:</span>    <span class="p p-Indicator">[</span><span class="nv">https</span><span class="p p-Indicator">]</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>XML</em><div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">&lt;!-- config/routes.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>

<span class="nt">&lt;routes</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/routing&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/routing https://symfony.com/schema/routing/routing-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;login&quot;</span> <span class="na">path=</span><span class="s">&quot;/login&quot;</span> <span class="na">schemes=</span><span class="s">&quot;https&quot;</span>
           <span class="na">controller=</span><span class="s">&quot;App\Controller\SecurityController::login&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/routes&gt;</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>PHP</em><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// config/routes.php</span>
<span class="k">use</span> <span class="nx">App\Controller\SecurityController</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Loader\Configurator\RoutingConfigurator</span><span class="p">;</span>

<span class="k">return</span> <span class="k">function</span> <span class="p">(</span><span class="nx">RoutingConfigurator</span> <span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;login&#39;</span><span class="p">,</span> <span class="s1">&#39;/login&#39;</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="na">controller</span><span class="p">([</span><span class="nx">SecurityController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;login&#39;</span><span class="p">])</span>
        <span class="o">-&gt;</span><span class="na">schemes</span><span class="p">([</span><span class="s1">&#39;https&#39;</span><span class="p">])</span>
    <span class="p">;</span>
<span class="p">};</span>
</pre></div>
</td></tr></table></div>
</li>
</ul>
</div>
<p>The URL generated for the <code class="docutils literal"><span class="pre">login</span></code> route will always use HTTPS. This means that
when using the <code class="docutils literal"><span class="pre">path()</span></code> Twig function to generate URLs, you may get an
absolute URL instead of a relative URL if the HTTP scheme of the original
request is different from the scheme used by the route:</p>
<div class="highlight-twig"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">{# if the current scheme is HTTPS, generates a relative URL: /login #}</span><span class="x"></span>
<span class="cp">{{</span> <span class="nv">path</span><span class="o">(</span><span class="s1">&#39;login&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>

<span class="c">{# if the current scheme is HTTP, generates an absolute URL to change</span>
<span class="c">   the scheme: https://example.com/login #}</span><span class="x"></span>
<span class="cp">{{</span> <span class="nv">path</span><span class="o">(</span><span class="s1">&#39;login&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
</pre></div>
</td></tr></table></div>
<p>The scheme requirement is also enforced for incoming requests. If you try to
access the <code class="docutils literal"><span class="pre">/login</span></code> URL with HTTP, you will automatically be redirected to the
same URL, but with the HTTPS scheme.</p>
<p>If you want to force a group of routes to use HTTPS, you can define the default
scheme when importing them. The following example forces HTTPS on all routes
defined as annotations:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># config/routes/annotations.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">controllers</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">resource</span><span class="p p-Indicator">:</span> <span class="s">&#39;../../src/Controller/&#39;</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">annotation</span>
    <span class="l l-Scalar l-Scalar-Plain">defaults</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">schemes</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">[</span><span class="nv">https</span><span class="p p-Indicator">]</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>XML</em><div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">&lt;!-- config/routes/annotations.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;routes</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/routing&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/routing</span>
<span class="s">        https://symfony.com/schema/routing/routing-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;import</span> <span class="na">resource=</span><span class="s">&quot;../../src/Controller/&quot;</span> <span class="na">type=</span><span class="s">&quot;annotation&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;default</span> <span class="na">key=</span><span class="s">&quot;schemes&quot;</span><span class="nt">&gt;</span>HTTPS<span class="nt">&lt;/default&gt;</span>
    <span class="nt">&lt;/import&gt;</span>
<span class="nt">&lt;/routes&gt;</span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>PHP</em><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// config/routes/annotations.php</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Loader\Configurator\RoutingConfigurator</span><span class="p">;</span>

<span class="k">return</span> <span class="k">function</span> <span class="p">(</span><span class="nx">RoutingConfigurator</span> <span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">import</span><span class="p">(</span><span class="s1">&#39;../../src/Controller/&#39;</span><span class="p">,</span> <span class="s1">&#39;annotation&#39;</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="na">schemes</span><span class="p">([</span><span class="s1">&#39;https&#39;</span><span class="p">])</span>
    <span class="p">;</span>
<span class="p">};</span>
</pre></div>
</td></tr></table></div>
</li>
</ul>
</div>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">The Security component provides
<a class="reference internal" href="security/force_https.html"><em>another way to enforce HTTP or HTTPS</em></a>
via the <code class="docutils literal"><span class="pre">requires_channel</span></code> setting.</p>
</div>
</div>
</div>
<div class="section" id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>Here are some common errors you might see while working with routing:</p>
<blockquote>
<div>Controller &#8220;App\Controller\BlogController::show()&#8221; requires that you
provide a value for the &#8220;$slug&#8221; argument.</div></blockquote>
<p>This happens when your controller method has an argument (e.g. <code class="docutils literal"><span class="pre">$slug</span></code>):</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">function</span> <span class="nf">show</span><span class="p">(</span><span class="nv">$slug</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>But your route path does <em>not</em> have a <code class="docutils literal"><span class="pre">{slug}</span></code> parameter (e.g. it is
<code class="docutils literal"><span class="pre">/blog/show</span></code>). Add a <code class="docutils literal"><span class="pre">{slug}</span></code> to your route path: <code class="docutils literal"><span class="pre">/blog/show/{slug}</span></code> or
give the argument a default value (i.e. <code class="docutils literal"><span class="pre">$slug</span> <span class="pre">=</span> <span class="pre">null</span></code>).</p>
<blockquote>
<div>Some mandatory parameters are missing (&#8220;slug&#8221;) to generate a URL for route
&#8220;blog_show&#8221;.</div></blockquote>
<p>This means that you&#8217;re trying to generate a URL to the <code class="docutils literal"><span class="pre">blog_show</span></code> route but
you are <em>not</em> passing a <code class="docutils literal"><span class="pre">slug</span></code> value (which is required, because it has a
<code class="docutils literal"><span class="pre">{slug}</span></code> parameter in the route path). To fix this, pass a <code class="docutils literal"><span class="pre">slug</span></code> value when
generating the route:</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">generateUrl</span><span class="p">(</span><span class="s1">&#39;blog_show&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;slug&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;slug-value&#39;</span><span class="p">]);</span>

<span class="c1">// or, in Twig</span>
<span class="c1">// {{ path(&#39;blog_show&#39;, {slug: &#39;slug-value&#39;}) }}</span>
</pre></div>
</div>
</div>
<div class="section" id="learn-more-about-routing">
<h2>Learn more about Routing<a class="headerlink" href="#learn-more-about-routing" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="toctree-wrapper compound">
</div>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="routing/custom_route_loader.html">How to Create a custom Route Loader</a></li>
<li class="toctree-l1"><a class="reference internal" href="routing/routing_from_database.html">Looking up Routes from a Database: Symfony CMF DynamicRouter</a></li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="controller.html" class="btn btn-neutral float-right" title="Controller" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="page_creation.html" class="btn btn-neutral" title="Create your First Page in Symfony" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright .

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            LANGUAGE:'ja',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: ''
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/translations.js"></script>

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>